/*
Copyright DHTMLX LTD. http://www.dhtmlx.com
To use this component please contact sales@dhtmlx.com to obtain license
*/dhtmlx=function(a){for(var b in a)dhtmlx[b]=a[b];return dhtmlx};dhtmlx.extend_api=function(a,b,c){var d=window[a];if(d)window[a]=function(a){if(a&&typeof a=="object"&&!a.tagName){var c=d.apply(this,b._init?b._init(a):arguments),g;for(g in dhtmlx)if(b[g])this[b[g]](dhtmlx[g]);for(g in a)if(b[g])this[b[g]](a[g]);else g.indexOf("on")==0&&this.attachEvent(g,a[g])}else c=d.apply(this,arguments);b._patch&&b._patch(this);return c||this},window[a].prototype=d.prototype,c&&dhtmlXHeir(window[a].prototype,c)};
dhtmlxAjax={get:function(a,b){var c=new dtmlXMLLoaderObject(!0);c.async=arguments.length<3;c.waitCall=b;c.loadXML(a);return c},post:function(a,b,c){var d=new dtmlXMLLoaderObject(!0);d.async=arguments.length<4;d.waitCall=c;d.loadXML(a,!0,b);return d},getSync:function(a){return this.get(a,null,!0)},postSync:function(a,b){return this.post(a,b,null,!0)}};
function dtmlXMLLoaderObject(a,b,c,d){this.xmlDoc="";this.async=typeof c!="undefined"?c:!0;this.onloadAction=a||null;this.mainObject=b||null;this.waitCall=null;this.rSeed=d||!1;return this}
dtmlXMLLoaderObject.prototype.waitLoadFunction=function(a){var b=!0;return this.check=function(){if(a&&a.onloadAction!=null&&(!a.xmlDoc.readyState||a.xmlDoc.readyState==4)&&b){b=!1;if(typeof a.onloadAction=="function")a.onloadAction(a.mainObject,null,null,null,a);if(a.waitCall)a.waitCall.call(this,a),a.waitCall=null}}};
dtmlXMLLoaderObject.prototype.getXMLTopNode=function(a,b){if(this.xmlDoc.responseXML){var c=this.xmlDoc.responseXML.getElementsByTagName(a);c.length==0&&a.indexOf(":")!=-1&&(c=this.xmlDoc.responseXML.getElementsByTagName(a.split(":")[1]));var d=c[0]}else d=this.xmlDoc.documentElement;if(d)return this._retry=!1,d;if(_isIE&&!this._retry){var e=this.xmlDoc.responseText,b=this.xmlDoc;this._retry=!0;this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM");this.xmlDoc.async=!1;this.xmlDoc.loadXML(e);return this.getXMLTopNode(a,
b)}dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]);return document.createElement("DIV")};
dtmlXMLLoaderObject.prototype.loadXMLString=function(a){if(_isIE)this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(a);else{var b=new DOMParser;this.xmlDoc=b.parseFromString(a,"text/xml")}if(this.onloadAction)this.onloadAction(this.mainObject,null,null,null,this);if(this.waitCall)this.waitCall(),this.waitCall=null};
dtmlXMLLoaderObject.prototype.loadXML=function(a,b,c,d){this.rSeed&&(a+=(a.indexOf("?")!=-1?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf());this.filePath=a;this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(this.async)this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this);this.xmlDoc.open(b?"POST":"GET",a,this.async);d?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type",
"text/xml")):b&&this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded");this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlDoc.send(c);this.async||(new this.waitLoadFunction(this))()};
dtmlXMLLoaderObject.prototype.destructor=function(){return this.setXSLParamValue=this.getXMLTopNode=this.xmlNodeToJSON=this.doSerialization=this.loadXMLString=this.loadXML=this.doXSLTransToString=this.doXSLTransToObject=this.doXPathOpera=this.doXPath=this.xmlDoc=this.mainObject=this.onloadAction=this.filePath=this.rSeed=this.async=this._retry=this._getAllNamedChilds=this._filterXPath=null};
dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(a){for(var b={},c=0;c<a.attributes.length;c++)b[a.attributes[c].name]=a.attributes[c].value;b._tagvalue=a.firstChild?a.firstChild.nodeValue:"";for(c=0;c<a.childNodes.length;c++){var d=a.childNodes[c].tagName;d&&(b[d]||(b[d]=[]),b[d].push(this.xmlNodeToJSON(a.childNodes[c])))}return b};function callerFunction(a,b){return this.handler=function(c){if(!c)c=window.event;a(c,b);return!0}}function getAbsoluteLeft(a){return getOffset(a).left}
function getAbsoluteTop(a){return getOffset(a).top}function getOffsetSum(a){for(var b=0,c=0;a;)b+=parseInt(a.offsetTop),c+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:b,left:c}}
function getOffsetRect(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{top:Math.round(i),left:Math.round(j)}}function getOffset(a){return a.getBoundingClientRect?getOffsetRect(a):getOffsetSum(a)}
function convertStringToBoolean(a){typeof a=="string"&&(a=a.toLowerCase());switch(a){case "1":case "true":case "yes":case "y":case 1:case !0:return!0;default:return!1}}function getUrlSymbol(a){return a.indexOf("?")!=-1?"&":"?"}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop)return window.dhtmlDragAndDrop;this.dragStartObject=this.dragStartNode=this.dragNode=this.lastLanding=0;this.tempDOMM=this.tempDOMU=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}
dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy;a.dragStarter=b;this.addDragLanding(a,b)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b};
dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if(!((a||window.event)&&(a||event).button==2)){if(window.dhtmlDragAndDrop.waitDrag)return window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1;window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(a);window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=
document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=(new Date).valueOf();a&&a.preventDefault&&a.preventDefault();return!1}};
dhtmlDragAndDropObject.prototype.callDrag=function(a){if(!a)a=window.event;dragger=window.dhtmlDragAndDrop;if(!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode)if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,a);if(!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=
0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else return dragger.stopDrag(a,!0);if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var b=dragger.gldragNode;if(dragger.gldragNode.old)b=dragger.gldragNode.old;b.parentNode.removeChild(b);var c=dragger.dragNode.pWindow;b.pWindow&&b.pWindow.dhtmlDragAndDrop.lastLanding&&b.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(b.pWindow.dhtmlDragAndDrop.lastLanding);if(_isIE){var d=document.createElement("Div");d.innerHTML=
dragger.dragNode.outerHTML;dragger.dragNode=d.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);c.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=a.clientX+15+(dragger.fx?dragger.fx*-1:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=a.clientY+3+(dragger.fy?dragger.fy*-1:0)+(document.body.scrollTop||
document.documentElement.scrollTop)+"px";var e=a.srcElement?a.srcElement:a.target;dragger.checkLanding(e,a)}};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(a){if(window.name){for(var b=parent.frames[window.name].frameElement.offsetParent,c=0,d=0;b;)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;if(parent.dhtmlDragAndDrop){var e=parent.dhtmlDragAndDrop.calculateFramePosition(1);c+=e.split("_")[0]*1;d+=e.split("_")[1]*1}if(a)return c+"_"+d;else this.fx=c;this.fy=d}return"0_0"};
dhtmlDragAndDropObject.prototype.checkLanding=function(a,b){a&&a.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=a,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,b.clientX,b.clientY,b),this.lastLanding_scr=_isIE?b.srcElement:b.target):a&&a.tagName!="BODY"?this.checkLanding(a.parentNode,b):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,b.clientX,b.clientY,b),this.lastLanding=
0,this._onNotFound&&this._onNotFound())};
dhtmlDragAndDropObject.prototype.stopDrag=function(a,b){dragger=window.dhtmlDragAndDrop;if(!b){dragger.stopFrameRoute();var c=dragger.lastLanding;dragger.lastLanding=null;c&&c.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,c,_isIE?event.srcElement:a.target)}dragger.lastLanding=null;dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode);dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=
0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(a){a&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var b=0;b<window.frames.length;b++)try{window.frames[b]!=a&&window.frames[b].dhtmlDragAndDrop&&window.frames[b].dhtmlDragAndDrop.stopFrameRoute(window)}catch(c){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(d){}};
dhtmlDragAndDropObject.prototype.initFrameRoute=function(a,b){if(a)window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=a.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=a.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=a.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=a.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&b&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition();
try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(c){}for(var d=0;d<window.frames.length;d++)try{window.frames[d]!=a&&window.frames[d].dhtmlDragAndDrop&&window.frames[d].dhtmlDragAndDrop.initFrameRoute(window,!a||b?1:0)}catch(e){}};_OperaRv=_KHTMLrv=_FFrv=_isChrome=_isMacOS=_isKHTML=_isOpera=_isIE=_isFF=!1;navigator.userAgent.indexOf("Macintosh")!=-1&&(_isMacOS=!0);navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0);
navigator.userAgent.indexOf("Safari")!=-1||navigator.userAgent.indexOf("Konqueror")!=-1?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):navigator.userAgent.indexOf("Opera")!=-1?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):navigator.appName.indexOf("Microsoft")!=-1?(_isIE=!0,navigator.appVersion.indexOf("MSIE 8.0")!=-1&&document.compatMode!="BackCompat"&&
(_isIE=8),navigator.appVersion.indexOf("MSIE 9.0")!=-1&&document.compatMode!="BackCompat"&&(_isIE=8)):(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1]));
dtmlXMLLoaderObject.prototype.doXPath=function(a,b,c,d){if(_isKHTML||!_isIE&&!window.XPathResult)return this.doXPathOpera(a,b);if(_isIE)return b||(b=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),b||dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]),c!=null&&b.setProperty("SelectionNamespaces","xmlns:xsl='"+c+"'"),d=="single"?b.selectSingleNode(a):b.selectNodes(a)||[];else{var e=b;b||(b=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML);b||dhtmlxError.throwError("LoadXML",
"Incorrect XML",[b||this.xmlDoc,this.mainObject]);b.nodeName.indexOf("document")!=-1?e=b:(e=b,b=b.ownerDocument);var f=XPathResult.ANY_TYPE;if(d=="single")f=XPathResult.FIRST_ORDERED_NODE_TYPE;var g=[],h=b.evaluate(a,e,function(){return c},f,null);if(f==XPathResult.FIRST_ORDERED_NODE_TYPE)return h.singleNodeValue;for(var i=h.iterateNext();i;)g[g.length]=i,i=h.iterateNext();return g}};function B(){if(!this.catches)this.catches=[];return this}B.prototype.catchError=function(a,b){this.catches[a]=b};
B.prototype.throwError=function(a,b,c){if(this.catches[a])return this.catches[a](a,b,c);if(this.catches.ALL)return this.catches.ALL(a,b,c);alert("Error type: "+a+"\nDescription: "+b);return null};window.dhtmlxError=new B;
dtmlXMLLoaderObject.prototype.doXPathOpera=function(a,b){var c=a.replace(/[\/]+/gi,"/").split("/"),d=null,e=1;if(!c.length)return[];if(c[0]==".")d=[b];else if(c[0]=="")d=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(c[e].replace(/\[[^\]]*\]/g,"")),e++;else return[];for(;e<c.length;e++)d=this._getAllNamedChilds(d,c[e]);c[e-1].indexOf("[")!=-1&&(d=this._filterXPath(d,c[e-1]));return d};
dtmlXMLLoaderObject.prototype._filterXPath=function(a,b){for(var c=[],b=b.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,""),d=0;d<a.length;d++)a[d].getAttribute(b)&&(c[c.length]=a[d]);return c};
dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(a,b){var c=[];_isKHTML&&(b=b.toUpperCase());for(var d=0;d<a.length;d++)for(var e=0;e<a[d].childNodes.length;e++)_isKHTML?a[d].childNodes[e].tagName&&a[d].childNodes[e].tagName.toUpperCase()==b&&(c[c.length]=a[d].childNodes[e]):a[d].childNodes[e].tagName==b&&(c[c.length]=a[d].childNodes[e]);return c};function dhtmlXHeir(a,b){for(var c in b)typeof b[c]=="function"&&(a[c]=b[c]);return a}
function dhtmlxEvent(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}dtmlXMLLoaderObject.prototype.xslDoc=null;dtmlXMLLoaderObject.prototype.setXSLParamValue=function(a,b,c){if(!c)c=this.xslDoc;if(c.responseXML)c=c.responseXML;var d=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+a+"']",c,"http://www.w3.org/1999/XSL/Transform","single");if(d!=null)d.firstChild.nodeValue=b};
dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(a,b){if(!a)a=this.xslDoc;if(a.responseXML)a=a.responseXML;if(!b)b=this.xmlDoc;if(b.responseXML)b=b.responseXML;if(_isIE){d=new ActiveXObject("Msxml2.DOMDocument.3.0");try{b.transformNodeToObject(a,d)}catch(c){d=b.transformNode(a)}}else{if(!this.XSLProcessor)this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(a);var d=this.XSLProcessor.transformToDocument(b)}return d};
dtmlXMLLoaderObject.prototype.doXSLTransToString=function(a,b){var c=this.doXSLTransToObject(a,b);return typeof c=="string"?c:this.doSerialization(c)};dtmlXMLLoaderObject.prototype.doSerialization=function(a){if(!a)a=this.xmlDoc;if(a.responseXML)a=a.responseXML;if(_isIE)return a.xml;else{var b=new XMLSerializer;return b.serializeToString(a)}};
dhtmlxEventable=function(a){a.attachEvent=function(a,c,d){a="ev_"+a.toLowerCase();this[a]||(this[a]=new this.eventCatcher(d||this));return a+":"+this[a].addEvent(c)};a.callEvent=function(a,c){a="ev_"+a.toLowerCase();return this[a]?this[a].apply(this,c):!0};a.checkEvent=function(a){return!!this["ev_"+a.toLowerCase()]};a.eventCatcher=function(a){var c=[],d=function(){for(var d=!0,f=0;f<c.length;f++)if(c[f]!=null)var g=c[f].apply(a,arguments),d=d&&g;return d};d.addEvent=function(a){typeof a!="function"&&
(a=eval(a));return a?c.push(a)-1:!1};d.removeEvent=function(a){c[a]=null};return d};a.detachEvent=function(a){if(a!=!1){var c=a.split(":");this[c[0]].removeEvent(c[1])}};a.detachAllEvents=function(){for(var a in this)a.indexOf("ev_")==0&&delete this[a]}};
(function(){var a=dhtmlx.message=function(b,c,d,e){if(!a.area)a.area=document.createElement("DIV"),a.area.style.cssText="position:absolute;right:5px;width:250px;z-index:100;",a.area.className="dhtmlx_message_area",a.area.style[a.defPosition]="5px",document.body.appendChild(a.area);typeof b!="object"&&(b={text:b,type:c,lifetime:d,id:e});b.type=b.type||"info";b.id=b.id||a.uid();b.lifetime=b.lifetime||a.defTimeout;a.hide(b.id);var f=document.createElement("DIV");f.style.cssText="border-radius:4px; padding:4px 4px 4px 20px;background-color:#FFFFCC;font-size:12px;font-family:Tahoma;color:navy;z-index: 10000;margin:5px;border:1px solid lightgrey;";
f.innerHTML=b.text;f.className=b.type;a.defPosition=="bottom"&&a.area.firstChild?a.area.insertBefore(f,a.area.firstChild):a.area.appendChild(f);a.timers[b.id]=window.setTimeout(function(){a.hide(b.id)},b.lifetime);a.pull[b.id]=f;return b.id};a.defTimeout=4E3;a.defPosition="top";a.pull={};a.timers={};a.seed=(new Date).valueOf();a.uid=function(){return a.seed++};a.hideAll=function(){for(var b in a.pull)a.hide(b)};a.hide=function(b){var c=a.pull[b];c&&c.parentNode&&(c.parentNode.removeChild(c),window.clearTimeout(a.timers[b]),
delete a.pull[b])}})();
function dhtmlXMenuObject(a,b){var c=this;this.addBaseIdAsContextZone=null;this.isDhtmlxMenuObject=!0;this.skin=b!=null?b:"dhx_skyblue";this.imagePath="";this._isIE6=!1;if(_isIE)this._isIE6=window.XMLHttpRequest==null?!0:!1;if(a==null)this.base=document.body;else{var d=typeof a=="string"?document.getElementById(a):a;if(d!=null){this.base=d;if(!this.base.id)this.base.id=(new Date).valueOf();for(;this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);this.base.className+=" dhtmlxMenu_"+
this.skin+"_Middle dir_left";this.base._autoSkinUpdate=!0;if(this.base.oncontextmenu)this.base._oldContextMenuHandler=this.base.oncontextmenu;this.addBaseIdAsContextZone=this.base.id;this.base.onselectstart=function(a){a=a||event;return a.returnValue=!1};this.base.oncontextmenu=function(a){a=a||event;return a.returnValue=!1}}else this.base=document.body}this.topId="dhxWebMenuTopId";if(!this.extendedModule){for(var e=function(){alert(this.i18n.dhxmenuextalert)},f="setItemEnabled,setItemDisabled,isItemEnabled,_changeItemState,getItemText,setItemText,loadFromHTML,hideItem,showItem,isItemHidden,_changeItemVisible,setUserData,getUserData,setOpenMode,setWebModeTimeout,enableDynamicLoading,_updateLoaderIcon,getItemImage,setItemImage,clearItemImage,setAutoShowMode,setAutoHideMode,setContextMenuHideAllMode,getContextMenuHideAllMode,setVisibleArea,setTooltip,getTooltip,setHotKey,getHotKey,setItemSelected,setTopText,setRTL,setAlign,setHref,clearHref,getCircuit,_clearAllSelectedSubItemsInPolygon,_checkArrowsState,_addUpArrow,_addDownArrow,_removeUpArrow,_removeDownArrow,_isArrowExists,_doScrollUp,_doScrollDown,_countPolygonItems,setOverflowHeight,_getRadioImgObj,_setRadioState,_radioOnClickHandler,getRadioChecked,setRadioChecked,addRadioButton,_getCheckboxState,_setCheckboxState,_readLevel,_updateCheckboxImage,_checkboxOnClickHandler,setCheckboxState,getCheckboxState,addCheckbox,serialize".split(","),
g=0;g<f.length;g++)this[f[g]]||(this[f[g]]=e);f=null}this.fixedPosition=!1;this.menuLastClicked=this.menuSelected=-1;this.idPrefix="";this.itemTagName="item";this.itemTextTagName="itemtext";this.userDataTagName="userdata";this.itemTipTagName="tooltip";this.itemHotKeyTagName="hotkey";this.itemHrefTagName="href";this.dirTopLevel="bottom";this.dirSubLevel="right";this.menuY2=this.menuY1=this.menuX2=this.menuX1=null;this.menuMode="web";this.menuTimeoutMsec=400;this.menuTimeoutHandler=null;this.idPull=
{};this.itemPull={};this.userData={};this.radio={};this._rtl=!1;this._align="left";this.menuTouched=!1;this.zInd=this.zIndInit=1200;this.zIndStep=50;this.menuModeTopLevelTimeout=!0;this.menuModeTopLevelTimeoutTime=200;this._topLevelBottomMargin=1;this._topLevelRightMargin=0;this._topLevelOffsetLeft=1;this._arrowFFFix=_isIE?document.compatMode=="BackCompat"?0:-4:-4;this.setSkin=function(a){var b=this.skin;this.skin=a;switch(this.skin){case "dhx_black":case "dhx_blue":case "dhx_skyblue":case "dhx_web":this._topLevelBottomMargin=
2;this._topLevelOffsetLeft=this._topLevelRightMargin=1;this._arrowFFFix=_isIE?document.compatMode=="BackCompat"?0:-4:-4;break;case "dhx_web":this._arrowFFFix=0}if(this.base._autoSkinUpdate)this.base.className=this.base.className.replace("dhtmlxMenu_"+b+"_Middle","")+" dhtmlxMenu_"+this.skin+"_Middle";for(var c in this.idPull)this.idPull[c].className=String(this.idPull[c].className).replace(b,this.skin)};this.setSkin(this.skin);this.dLoad=!1;this.dLoadUrl="";this.dLoadSign="?";this.loaderIcon=!1;this.limit=
0;this._scrollUpTM=null;this._scrollUpTMTime=20;this._scrollUpTMStep=3;this._scrollDownTM=null;this._scrollDownTMTime=20;this._scrollDownTMStep=3;this.context=!1;this.contextZones={};this.contextMenuZoneId=!1;this.contextHideAllMode=this.contextAutoHide=this.contextAutoShow=!0;this.sxDacProc=null;this.dacSpeed=10;this.dacCycles=[];for(g=0;g<10;g++)this.dacCycles[g]=g;this.dacSpeedIE=10;this.dacCyclesIE=[];for(g=0;g<10;g++)this.dacCyclesIE[g]=g;this._enableDacSupport=function(a){this.sxDacProc=a};
this._selectedSubItems=[];this._openedPolygons=[];this._addSubItemToSelected=function(a,b){for(var c=!0,d=0;d<this._selectedSubItems.length;d++)this._selectedSubItems[d][0]==a&&this._selectedSubItems[d][1]==b&&(c=!1);c==!0&&this._selectedSubItems.push([a,b]);return c};this._removeSubItemFromSelected=function(a,b){for(var c=[],d=!1,e=0;e<this._selectedSubItems.length;e++)this._selectedSubItems[e][0]==a&&this._selectedSubItems[e][1]==b?d=!0:c[c.length]=this._selectedSubItems[e];if(d==!0)this._selectedSubItems=
c;return d};this._getSubItemToDeselectByPolygon=function(a){for(var b=[],c=0;c<this._selectedSubItems.length;c++)if(this._selectedSubItems[c][1]==a){b[b.length]=this._selectedSubItems[c][0];for(var b=b.concat(this._getSubItemToDeselectByPolygon(this._selectedSubItems[c][0])),d=!0,e=0;e<this._openedPolygons.length;e++)this._openedPolygons[e]==this._selectedSubItems[c][0]&&(d=!1);d==!0&&(this._openedPolygons[this._openedPolygons.length]=this._selectedSubItems[c][0]);this._selectedSubItems[c][0]=-1;
this._selectedSubItems[c][1]=-1}return b};this._hidePolygon=function(a){if(this.idPull["polygon_"+a]!=null)if(this.sxDacProc!=null&&this.idPull["sxDac_"+a]!=null)this.idPull["sxDac_"+a]._hide();else if(this.idPull["polygon_"+a].style.display!="none"){this.idPull["polygon_"+a].style.display="none";if(this.idPull["arrowup_"+a]!=null)this.idPull["arrowup_"+a].style.display="none";if(this.idPull["arrowdown_"+a]!=null)this.idPull["arrowdown_"+a].style.display="none";this._updateItemComplexState(a,!0,!1);
if(this._isIE6&&this.idPull["polygon_"+a+"_ie6cover"]!=null)this.idPull["polygon_"+a+"_ie6cover"].style.display="none";a=String(a).replace(this.idPrefix,"");a==this.topId&&(a=null);this.callEvent("onHide",[a])}};this._showPolygon=function(a,b){var c=this._countVisiblePolygonItems(a);if(c!=0){var d="polygon_"+a;if(this.idPull[d]!=null&&this.idPull[a]!=null&&(!this.menuModeTopLevelTimeout||this.menuMode!="web"||this.context||this.idPull[a]._mouseOver||b!=this.dirTopLevel)){this.fixedPosition||this._autoDetectVisibleArea();
var e=0,f=0,g=null,l=null;if(this.limit>0&&this.limit<c){var p="arrowup_"+a,E="arrowdown_"+a;this.idPull["arrowup_"+a]==null&&this._addUpArrow(String(a).replace(this.idPrefix,""));this.idPull["arrowdown_"+a]==null&&this._addDownArrow(String(a).replace(this.idPrefix,""));g=this.idPull["arrowup_"+a];g.style.visibility="hidden";g.style.display="";g.style.zIndex=this.zInd;e=g.offsetHeight;l=this.idPull["arrowdown_"+a];l.style.visibility="hidden";l.style.display="";l.style.zIndex=this.zInd;f=l.offsetHeight}this.idPull[d].style.visibility=
"hidden";this.idPull[d].style.left="0px";this.idPull[d].style.top="0px";this.idPull[d].style.display="";this.idPull[d].style.zIndex=this.zInd;if(this.limit>0)this.limit<c?(this.idPull[d].style.height=24*this.limit+"px",this.idPull[d].scrollTop=0):this.idPull[d].style.height="";this.zInd+=this.zIndStep;if(this.itemPull[a]!=null)var D="polygon_"+this.itemPull[a].parent;else this.context&&(D=this.idPull[this.idPrefix+this.topId]);var s=this.idPull[a].tagName!=null?getAbsoluteLeft(this.idPull[a]):this.idPull[a][0],
v=this.idPull[a].tagName!=null?getAbsoluteTop(this.idPull[a]):this.idPull[a][1],w=this.idPull[a].tagName!=null?this.idPull[a].offsetWidth:0,C=this.idPull[a].tagName!=null?this.idPull[a].offsetHeight+e+f:0,n=0,q=0,u=this.idPull[d].offsetWidth,z=this.idPull[d].offsetHeight;b=="bottom"&&(n=this._rtl?s+(w!=null?w:0)-u:this._align=="right"?s+w-u:s-1+(b==this.dirTopLevel?this._topLevelRightMargin:0),q=v-1+C-e-f+this._topLevelBottomMargin);b=="right"&&(n=s+w-1,q=v+2);b=="left"&&(n=s-this.idPull[d].offsetWidth+
2,q=v+2);b=="top"&&(n=s-1,q=v-z+2);if(this.fixedPosition)var x=65536,A=65536;else if(x=this.menuX2!=null?this.menuX2:0,A=this.menuY2!=null?this.menuY2:0,x==0)window.innerWidth?(x=window.innerWidth,A=window.innerHeight):(x=document.body.offsetWidth,A=document.body.scrollHeight);n+u>x&&!this._rtl&&(n=s-u+2);n<this.menuX1&&this._rtl&&(n=s+w-2);n<0&&(n=0);q+z>A&&this.menuY2!=null&&(q=Math.max(v+C-z+2,2),this.itemPull[a]!=null&&!this.context&&this.itemPull[a].parent==this.idPrefix+this.topId&&(q-=this.base.offsetHeight));
this.idPull[d].style.left=n+"px";this.idPull[d].style.top=q+e+"px";if(this.sxDacProc!=null&&this.idPull["sxDac_"+a]!=null)this.idPull["sxDac_"+a]._show();else{this.idPull[d].style.visibility="";if(this.limit>0&&this.limit<c)g.style.left=n+"px",g.style.top=q+"px",g.style.width=u+this._arrowFFFix+"px",g.style.visibility="",l.style.left=n+"px",l.style.top=q+e+z+"px",l.style.width=u+this._arrowFFFix+"px",l.style.visibility="",this._checkArrowsState(a);if(this._isIE6){var t=d+"_ie6cover";if(this.idPull[t]==
null){var y=document.createElement("IFRAME");y.className="dhtmlxMenu_IE6CoverFix_"+this.skin;y.frameBorder=0;y.setAttribute("src","javascript:false;");document.body.insertBefore(y,document.body.firstChild);this.idPull[t]=y}this.idPull[t].style.left=this.idPull[d].style.left;this.idPull[t].style.top=this.idPull[d].style.top;this.idPull[t].style.width=this.idPull[d].offsetWidth+"px";this.idPull[t].style.height=this.idPull[d].offsetHeight+"px";this.idPull[t].style.zIndex=this.idPull[d].style.zIndex-
1;this.idPull[t].style.display=""}a=String(a).replace(this.idPrefix,"");a==this.topId&&(a=null);this.callEvent("onShow",[a])}}}};this._redistribSubLevelSelection=function(a,b){for(;this._openedPolygons.length>0;)this._openedPolygons.pop();var c=this._getSubItemToDeselectByPolygon(b);this._removeSubItemFromSelected(-1,-1);for(var d=0;d<c.length;d++)if(this.idPull[c[d]]!=null&&c[d]!=a&&this.itemPull[c[d]].state=="enabled")this.idPull[c[d]].className="sub_item";for(d=0;d<this._openedPolygons.length;d++)this._openedPolygons[d]!=
b&&this._hidePolygon(this._openedPolygons[d]);if(this.itemPull[a].state=="enabled"){this.idPull[a].className="sub_item_selected";if(this.itemPull[a].complex&&this.dLoad&&this.itemPull[a].loaded=="no"){this.loaderIcon==!0&&this._updateLoaderIcon(a,!0);var e=new dtmlXMLLoaderObject(this._xmlParser,window);this.itemPull[a].loaded="get";this.callEvent("onXLS",[]);e.loadXML(this.dLoadUrl+this.dLoadSign+"action=loadMenu&parentId="+a.replace(this.idPrefix,"")+"&etc="+(new Date).getTime())}if((this.itemPull[a].complex||
this.dLoad&&this.itemPull[a].loaded=="yes")&&this.itemPull[a].complex&&this.idPull["polygon_"+a]!=null)this._updateItemComplexState(a,!0,!0),this._showPolygon(a,this.dirSubLevel);this._addSubItemToSelected(a,b);this.menuSelected=a}};this._doOnClick=function(a,b,c){this.menuLastClicked=a;if(this.itemPull[this.idPrefix+a].href_link!=null&&this.itemPull[this.idPrefix+a].state=="enabled"){var d=document.createElement("FORM"),e=String(this.itemPull[this.idPrefix+a].href_link).split("?");d.action=e[0];
if(e[1]!=null)for(var f=String(e[1]).split("&"),g=0;g<f.length;g++){var l=String(f[g]).split("="),p=document.createElement("INPUT");p.type="hidden";p.name=l[0]||"";p.value=l[1]||"";d.appendChild(p)}if(this.itemPull[this.idPrefix+a].href_target!=null)d.target=this.itemPull[this.idPrefix+a].href_target;d.style.display="none";document.body.appendChild(d);d.submit();d!=null&&(document.body.removeChild(d),d=null)}else b.charAt(0)!="c"&&b.charAt(1)!="d"&&b.charAt(2)!="s"&&(this.checkEvent("onClick")?(this._clearAndHide(),
this._isContextMenuVisible()&&this.contextAutoHide&&this._hideContextMenu(),this.callEvent("onClick",[a,this.contextMenuZoneId,c])):b.charAt(1)=="d"||this.menuMode=="win"&&b.charAt(2)=="t"||(this._clearAndHide(),this._isContextMenuVisible()&&this.contextAutoHide&&this._hideContextMenu()))};this._doOnTouchMenu=function(a){if(this.menuTouched==!1)this.menuTouched=!0,this.checkEvent("onTouch")&&this.callEvent("onTouch",[a])};this._searchMenuNode=function(a,b){for(var c=[],d=0;d<b.length;d++)if(typeof b[d]==
"object"){b[d].length==5&&typeof b[d][0]!="object"&&b[d][0].replace(this.idPrefix,"")==a&&d==0&&(c=b);var e=this._searchMenuNode(a,b[d]);e.length>0&&(c=e)}return c};this._getMenuNodes=function(a){var b=[],c;for(c in this.itemPull)this.itemPull[c].parent==a&&(b[b.length]=c);return b};this._genStr=function(a){for(var b="",c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",d=0;d<a;d++)b+=c.charAt(Math.round(Math.random()*(c.length-1)));return b};this.getItemType=function(a){a=this.idPrefix+
a;return this.itemPull[a]==null?null:this.itemPull[a].type};this.forEachItem=function(a){for(var b in this.itemPull)a(String(b).replace(this.idPrefix,""))};this._clearAndHide=function(){c.menuSelected=-1;for(c.menuLastClicked=-1;c._openedPolygons.length>0;)c._openedPolygons.pop();for(var a=0;a<c._selectedSubItems.length;a++){var b=c._selectedSubItems[a][0];if(c.idPull[b]!=null&&c.itemPull[b].state=="enabled"){if(c.idPull[b].className=="sub_item_selected")c.idPull[b].className="sub_item";if(c.idPull[b].className==
"dhtmlxMenu_"+c.skin+"_TopLevel_Item_Selected")c.idPull[b].className=c.itemPull[b].cssNormal!=null?c.itemPull[b].cssNormal:"dhtmlxMenu_"+c.skin+"_TopLevel_Item_Normal"}c._hidePolygon(b)}c.menuTouched=!1;if(c.context)c.contextHideAllMode?(c._hidePolygon(c.idPrefix+c.topId),c.zInd=c.zIndInit):c.zInd=c.zIndInit+c.zIndStep};this._doOnLoad=function(){};this.loadXML=function(a,b){if(b)this._doOnLoad=function(){b()};this.callEvent("onXLS",[]);this._xmlLoader.loadXML(a)};this.loadXMLString=function(a,b){if(b)this._doOnLoad=
function(){b()};this._xmlLoader.loadXMLString(a)};this._buildMenu=function(a,b){for(var c=0,d=0;d<a.childNodes.length;d++)if(a.childNodes[d].tagName==this.itemTagName){var e=a.childNodes[d],f={};f.id=this.idPrefix+(e.getAttribute("id")||this._genStr(24));f.title=e.getAttribute("text")||"";f.imgen=e.getAttribute("img")||"";f.imgdis=e.getAttribute("imgdis")||"";f.tip="";f.hotkey="";e.getAttribute("cssNormal")!=null&&(f.cssNormal=e.getAttribute("cssNormal"));f.type=e.getAttribute("type")||"item";if(f.type==
"checkbox")f.checked=e.getAttribute("checked")!=null,f.imgen="chbx_"+(f.checked?"1":"0"),f.imgdis=f.imgen;if(f.type=="radio")f.checked=e.getAttribute("checked")!=null,f.imgen="rdbt_"+(f.checked?"1":"0"),f.imgdis=f.imgen,f.group=e.getAttribute("group")||this._genStr(24),this.radio[f.group]==null&&(this.radio[f.group]=[]),this.radio[f.group][this.radio[f.group].length]=f.id;f.state=e.getAttribute("enabled")!=null||e.getAttribute("disabled")!=null?e.getAttribute("enabled")=="false"||e.getAttribute("disabled")==
"true"?"disabled":"enabled":"enabled";f.parent=b!=null?b:this.idPrefix+this.topId;f.complex=this.dLoad?e.getAttribute("complex")!=null?!0:!1:this._buildMenu(e,f.id)>0;this.dLoad&&f.complex&&(f.loaded="no");this.itemPull[f.id]=f;for(var g=0;g<e.childNodes.length;g++){var l=e.childNodes[g].tagName;l!=null&&(l=l.toLowerCase());if(l==this.userDataTagName){var p=e.childNodes[g];p.getAttribute("name")!=null&&(this.userData[f.id+"_"+p.getAttribute("name")]=p.firstChild.nodeValue!=null?p.firstChild.nodeValue:
"")}if(l==this.itemTextTagName)f.title=e.childNodes[g].firstChild.nodeValue;if(l==this.itemTipTagName)f.tip=e.childNodes[g].firstChild.nodeValue;if(l==this.itemHotKeyTagName)f.hotkey=e.childNodes[g].firstChild.nodeValue;if(l==this.itemHrefTagName&&f.type=="item")f.href_link=e.childNodes[g].firstChild.nodeValue,e.childNodes[g].getAttribute("target")!=null&&(f.href_target=e.childNodes[g].getAttribute("target"))}c++}return c};this._xmlParser=function(){if(c.dLoad){var a=this.getXMLTopNode("menu");parentId=
a.getAttribute("parentId")!=null?a.getAttribute("parentId"):null;if(parentId==null)c._buildMenu(a,null),c._initTopLevelMenu();else{c._buildMenu(a,c.idPrefix+parentId);c._addSubMenuPolygon(c.idPrefix+parentId,c.idPrefix+parentId);if(c.menuSelected==c.idPrefix+parentId){var b=c.idPrefix+parentId,d=c.itemPull[c.idPrefix+parentId].parent==c.idPrefix+c.topId,e=d&&!c.context?c.dirTopLevel:c.dirSubLevel,f=!1;if(d&&c.menuModeTopLevelTimeout&&c.menuMode=="web"&&!c.context){var g=c.idPull[c.idPrefix+parentId];
if(g._mouseOver==!0){var r=c.menuModeTopLevelTimeoutTime-((new Date).getTime()-g._dynLoadTM);if(r>1)g._menuOpenTM=window.setTimeout(function(){c._showPolygon(b,e)},r),f=!0}}f||c._showPolygon(b,e)}c.itemPull[c.idPrefix+parentId].loaded="yes";c.loaderIcon==!0&&c._updateLoaderIcon(c.idPrefix+parentId,!1)}this.destructor();c.callEvent("onXLE",[])}else a=this.getXMLTopNode("menu"),c._buildMenu(a,null),c.init(),c.callEvent("onXLE",[]),c._doOnLoad()};this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,
window);this._showSubLevelItem=function(a,b){if(document.getElementById("arrow_"+this.idPrefix+a)!=null)document.getElementById("arrow_"+this.idPrefix+a).style.display=b?"none":"";if(document.getElementById("image_"+this.idPrefix+a)!=null)document.getElementById("image_"+this.idPrefix+a).style.display=b?"none":"";if(document.getElementById(this.idPrefix+a)!=null)document.getElementById(this.idPrefix+a).style.display=b?"":"none"};this._hideSubLevelItem=function(a){this._showSubLevelItem(a,!0)};this.idPrefix=
this._genStr(12);this._bodyClick=function(a){a=a||event;a.button==2||_isOpera&&a.ctrlKey==!0||(c.context?c.contextAutoHide&&(!_isOpera||c._isContextMenuVisible()&&_isOpera)&&c._hideContextMenu():c._clearAndHide())};this._bodyContext=function(a){var a=a||event,b=(a.srcElement||a.target).className;if(!(b.search("dhtmlxMenu")!=-1&&b.search("SubLevelArea")!=-1)){var d=!0,e=a.target||a.srcElement;e.id!=null&&c.isContextZone(e.id)&&(d=!1);e==document.body&&(d=!1);d&&c.hideContextMenu()}};_isIE?(document.body.attachEvent("onclick",
this._bodyClick),document.body.attachEvent("oncontextmenu",this._bodyContext)):(window.addEventListener("click",this._bodyClick,!1),window.addEventListener("contextmenu",this._bodyContext,!1));this._UID=this._genStr(32);dhtmlxMenuObjectLiveInstances[this._UID]=this;dhtmlxEventable(this);return this}
dhtmlXMenuObject.prototype.init=function(){if(this._isInited!=!0)this.dLoad?(this.callEvent("onXLS",[]),this._xmlLoader.loadXML(this.dLoadUrl+this.dLoadSign+"action=loadMenu&etc="+(new Date).getTime())):(this._initTopLevelMenu(),this._isInited=!0)};
dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(a){var b=0,c;for(c in this.itemPull){var d=this.itemPull[c].parent,e=this.itemPull[c].type;this.idPull[c]!=null&&d==a&&(e=="item"||e=="radio"||e=="checkbox")&&this.idPull[c].style.display!="none"&&b++}return b};
dhtmlXMenuObject.prototype._redefineComplexState=function(a){if(this.idPrefix+this.topId!=a&&this.idPull["polygon_"+a]!=null&&this.idPull[a]!=null){var b=this._countVisiblePolygonItems(a);b>0&&!this.itemPull[a].complex&&this._updateItemComplexState(a,!0,!1);b==0&&this.itemPull[a].complex&&this._updateItemComplexState(a,!1,!1)}};
dhtmlXMenuObject.prototype._updateItemComplexState=function(a,b){if(!this.context&&this._getItemLevelType(a.replace(this.idPrefix,""))=="TopLevel")this.itemPull[a].complex=b;else if(!(this.idPull[a]==null||this.itemPull[a]==null))if(this.itemPull[a].complex=b,a!=this.idPrefix+this.topId){var c=null,d=this.idPull[a].childNodes[this._rtl?0:2];d.childNodes[0]&&String(d.childNodes[0].className).search("complex_arrow")===0&&(c=d.childNodes[0]);if(this.itemPull[a].complex){if(c==null){c=document.createElement("DIV");
c.className="complex_arrow";for(c.id="arrow_"+a;d.childNodes.length>0;)d.removeChild(d.childNodes[0]);d.appendChild(c)}if(this.dLoad&&this.itemPull[a].loaded=="get"&&this.loaderIcon){if(c.className!="complex_arrow_loading")c.className="complex_arrow_loading"}else c.className="complex_arrow"}else!this.itemPull[a].complex&&c!=null&&(d.removeChild(c),this.itemPull[a].hotkey_backup!=null&&this.setHotKey&&this.setHotKey(a.replace(this.idPrefix,""),this.itemPull[a].hotkey_backup))}};
dhtmlXMenuObject.prototype._getItemLevelType=function(a){return this.itemPull[this.idPrefix+a].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"};
dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(a){var b=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var c=0;c<b.length;c++)if(b[c]!=a&&this._hidePolygon(b[c]),this.idPull[b[c]]!=null&&b[c]!=a)this.idPull[b[c]].className=this.idPull[b[c]].className.replace(/Selected/g,"Normal");if(this.itemPull[this.idPrefix+a].state=="enabled")this.idPull[this.idPrefix+a].className="dhtmlxMenu_"+this.skin+"_TopLevel_Item_Selected",this._addSubItemToSelected(this.idPrefix+
a,"parent"),this.menuSelected=this.menuMode=="win"?this.menuSelected!=-1?a:this.menuSelected:a,this.itemPull[this.idPrefix+a].complex&&this.menuSelected!=-1&&this._showPolygon(this.idPrefix+a,this.dirTopLevel)};
dhtmlXMenuObject.prototype._initTopLevelMenu=function(){this.dirTopLevel="bottom";this.dirSubLevel=this._rtl?"left":"right";if(this.context)this.idPull[this.idPrefix+this.topId]=[0,0],this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId);else for(var a=this._getMenuNodes(this.idPrefix+this.topId),b=0;b<a.length;b++)this.itemPull[a[b]].type=="item"&&this._renderToplevelItem(a[b],null),this.itemPull[a[b]].type=="separator"&&this._renderSeparator(a[b],null)};
dhtmlXMenuObject.prototype._renderToplevelItem=function(a,b){var c=this,d=document.createElement("DIV");d.id=a;d.className=this.itemPull[a].state=="enabled"&&this.itemPull[a].cssNormal!=null?this.itemPull[a].cssNormal:"dhtmlxMenu_"+this.skin+"_TopLevel_Item_"+(this.itemPull[a].state=="enabled"?"Normal":"Disabled");if(this.itemPull[a].title!=""){var e=document.createElement("DIV");e.className="top_level_text";e.innerHTML=this.itemPull[a].title;d.appendChild(e)}if(this.itemPull[a].tip.length>0)d.title=
this.itemPull[a].tip;if(this.itemPull[a].imgen!=""||this.itemPull[a].imgdis!=""){var f=this.itemPull[a][this.itemPull[a].state=="enabled"?"imgen":"imgdis"];if(f){var g=document.createElement("IMG");g.border="0";g.id="image_"+a;g.src=this.imagePath+f;g.className="dhtmlxMenu_TopLevel_Item_Icon";d.childNodes.length>0&&!this._rtl?d.insertBefore(g,d.childNodes[0]):d.appendChild(g)}}d.onselectstart=function(a){a=a||event;return a.returnValue=!1};d.oncontextmenu=function(a){a=a||event;return a.returnValue=
!1};if(!this.cont)this.cont=document.createElement("DIV"),this.cont.dir="ltr",this.cont.className=this._align=="right"?"align_right":"align_left",this.base.appendChild(this.cont);b!=null&&(b++,b<0&&(b=0),b>this.cont.childNodes.length-1&&(b=null));b!=null?this.cont.insertBefore(d,this.cont.childNodes[b]):this.cont.appendChild(d);this.idPull[d.id]=d;this.itemPull[a].complex&&!this.dLoad&&this._addSubMenuPolygon(this.itemPull[a].id,this.itemPull[a].id);d.onmouseover=function(){c.menuMode=="web"&&window.clearTimeout(c.menuTimeoutHandler);
var a=c._getSubItemToDeselectByPolygon("parent");c._removeSubItemFromSelected(-1,-1);for(var b=0;b<a.length;b++)if(a[b]!=this.id&&c._hidePolygon(a[b]),c.idPull[a[b]]!=null&&a[b]!=this.id)if(c.itemPull[a[b]].cssNormal!=null)c.idPull[a[b]].className=c.itemPull[a[b]].cssNormal;else{if(c.idPull[a[b]].className=="sub_item_selected")c.idPull[a[b]].className="sub_item";c.idPull[a[b]].className=c.idPull[a[b]].className.replace(/Selected/g,"Normal")}if(c.itemPull[this.id].state=="enabled"){this.className=
"dhtmlxMenu_"+c.skin+"_TopLevel_Item_Selected";c._addSubItemToSelected(this.id,"parent");c.menuSelected=c.menuMode=="win"?c.menuSelected!=-1?this.id:c.menuSelected:this.id;if(c.dLoad&&c.itemPull[this.id].loaded=="no"){if(c.menuModeTopLevelTimeout&&c.menuMode=="web"&&!c.context)this._mouseOver=!0,this._dynLoadTM=(new Date).getTime();var d=new dtmlXMLLoaderObject(c._xmlParser,window);c.itemPull[this.id].loaded="get";c.callEvent("onXLS",[]);d.loadXML(c.dLoadUrl+c.dLoadSign+"action=loadMenu&parentId="+
this.id.replace(c.idPrefix,"")+"&etc="+(new Date).getTime())}if((!c.dLoad||c.dLoad&&(!c.itemPull[this.id].loaded||c.itemPull[this.id].loaded=="yes"))&&c.itemPull[this.id].complex&&c.menuSelected!=-1)if(c.menuModeTopLevelTimeout&&c.menuMode=="web"&&!c.context){this._mouseOver=!0;var e=this.id;this._menuOpenTM=window.setTimeout(function(){c._showPolygon(e,c.dirTopLevel)},c.menuModeTopLevelTimeoutTime)}else c._showPolygon(this.id,c.dirTopLevel)}c._doOnTouchMenu(this.id.replace(c.idPrefix,""))};d.onmouseout=
function(){if(!(c.itemPull[this.id].complex&&c.menuSelected!=-1)&&c.itemPull[this.id].state=="enabled")d.className=c.itemPull[this.id].cssNormal!=null?c.itemPull[this.id].cssNormal:"dhtmlxMenu_"+c.skin+"_TopLevel_Item_Normal";if(c.menuMode=="web")window.clearTimeout(c.menuTimeoutHandler),c.menuTimeoutHandler=window.setTimeout(function(){c._clearAndHide()},c.menuTimeoutMsec,"JavaScript");if(c.menuModeTopLevelTimeout&&c.menuMode=="web"&&!c.context)this._mouseOver=!1,window.clearTimeout(this._menuOpenTM)};
d.onclick=function(a){c.menuMode=="web"&&window.clearTimeout(c.menuTimeoutHandler);if(!(c.menuMode!="web"&&c.itemPull[this.id].state=="disabled")){a=a||event;a.cancelBubble=!0;a.returnValue=!1;if(c.menuMode=="win"&&c.itemPull[this.id].complex){if(c.menuSelected==this.id){c.menuSelected=-1;var b=!1}else c.menuSelected=this.id,b=!0;b?c._showPolygon(this.id,c.dirTopLevel):c._hidePolygon(this.id)}var d=c.itemPull[this.id].complex?"c":"-",e=c.itemPull[this.id].state!="enabled"?"d":"-",f={ctrl:a.ctrlKey,
alt:a.altKey,shift:a.shiftKey};c._doOnClick(this.id.replace(c.idPrefix,""),d+e+"t",f);return!1}}};dhtmlXMenuObject.prototype.setImagePath=function(){};dhtmlXMenuObject.prototype.setIconsPath=function(a){this.imagePath=a};dhtmlXMenuObject.prototype.setIconPath=dhtmlXMenuObject.prototype.setIconsPath;
dhtmlXMenuObject.prototype._updateItemImage=function(a){var a=this.idPrefix+a,b=this.itemPull[a].parent==this.idPrefix+this.topId&&!this.context,c=null;if(b)for(var d=0;d<this.idPull[a].childNodes.length;d++)try{this.idPull[a].childNodes[d].className=="dhtmlxMenu_TopLevel_Item_Icon"&&(c=this.idPull[a].childNodes[d])}catch(e){}else try{c=this.idPull[a].childNodes[this._rtl?2:0].childNodes[0]}catch(f){}var g=this.itemPull[a].type=="radio"?this.itemPull[a][this.itemPull[a].state=="enabled"?"imgen":"imgdis"]:
this.itemPull[a][this.itemPull[a].state=="enabled"?"imgen":"imgdis"];if(g.length>0)if(c!=null)c.src=this.imagePath+g;else if(b)c=document.createElement("IMG"),c.className="dhtmlxMenu_TopLevel_Item_Icon",c.src=this.imagePath+g,c.border="0",c.id="image_"+a,!this._rtl&&this.idPull[a].childNodes.length>0?this.idPull[a].insertBefore(c,this.idPull[a].childNodes[0]):this.idPull[a].appendChild(c);else{c=document.createElement("IMG");c.className="sub_icon";c.src=this.imagePath+g;c.border="0";c.id="image_"+
a;for(var h=this.idPull[a].childNodes[this._rtl?2:0];h.childNodes.length>0;)h.removeChild(h.childNodes[0]);h.appendChild(c)}else c!=null&&c.parentNode.removeChild(c)};
dhtmlXMenuObject.prototype.removeItem=function(a,b,c){b||(a=this.idPrefix+a);var d=null;if(a!=this.idPrefix+this.topId){if(this.itemPull[a]==null)return;var e=this.itemPull[a].type;if(e=="separator"){var f=this.idPull["separator_"+a];this.itemPull[a].parent==this.idPrefix+this.topId?(f.onclick=null,f.onselectstart=null,f.id=null):(f.childNodes[0].childNodes[0].onclick=null,f.childNodes[0].childNodes[0].onselectstart=null,f.childNodes[0].childNodes[0].id=null,f.childNodes[0].removeChild(f.childNodes[0].childNodes[0]),
f.removeChild(f.childNodes[0]));f.parentNode.removeChild(f);this.idPull["separator_"+a]=null;this.itemPull[a]=null;delete this.idPull["separator_"+a]}else{d=this.itemPull[a].parent;f=this.idPull[a];f.onclick=null;f.oncontextmenu=null;f.onmouseover=null;f.onmouseout=null;f.onselectstart=null;for(f.id=null;f.childNodes.length>0;)f.removeChild(f.childNodes[0]);f.parentNode.removeChild(f);this.idPull[a]=null;this.itemPull[a]=null;delete this.idPull[a]}delete this.itemPull[a];e=f=null}for(var g in this.itemPull)this.itemPull[g].parent==
a&&this.removeItem(g,!0,!0);var h=Array(a);d!=null&&!c&&this.idPull["polygon_"+d]!=null&&this.idPull["polygon_"+d].tbd.childNodes.length==0&&(h.push(d),this._updateItemComplexState(d,!1,!1));for(var i=0;i<h.length;i++)if(this.idPull["polygon_"+h[i]]){var j=this.idPull["polygon_"+h[i]];j.onclick=null;j.oncontextmenu=null;j.tbl.removeChild(j.tbd);j.tbd=null;j.removeChild(j.tbl);j.tbl=null;j.id=null;j.parentNode.removeChild(j);j=null;if(this._isIE6){var k="polygon_"+h[i]+"_ie6cover";this.idPull[k]!=
null&&(document.body.removeChild(this.idPull[k]),delete this.idPull[k])}this.idPull["arrowup_"+a]!=null&&this._removeArrow&&this._removeArrow("arrowup_"+a);this.idPull["arrowdown_"+a]!=null&&this._removeArrow&&this._removeArrow("arrowdown_"+a);this.idPull["polygon_"+h[i]]=null;delete this.idPull["polygon_"+h[i]]}h=null};
dhtmlXMenuObject.prototype._getAllParents=function(a){var b=[],c;for(c in this.itemPull)if(this.itemPull[c].parent==a&&(b[b.length]=this.itemPull[c].id,this.itemPull[c].complex))for(var d=this._getAllParents(this.itemPull[c].id),e=0;e<d.length;e++)b[b.length]=d[e];return b};
dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.context=!0;if(this.base._autoSkinUpdate==!0)this.base.className=this.base.className.replace("dhtmlxMenu_"+this.skin+"_Middle",""),this.base._autoSkinUpdate=!1;this.addBaseIdAsContextZone!=null&&this.addContextZone(this.addBaseIdAsContextZone)};
dhtmlXMenuObject.prototype.addContextZone=function(a){if(a==document.body)var a="document.body."+this.idPrefix,b=document.body;else b=document.getElementById(a);var c=!1,d;for(d in this.contextZones)c=c||d==a||this.contextZones[d]==b;if(c==!0)return!1;this.contextZones[a]=b;var e=this;if(_isOpera)this.operaContext=function(a){e._doOnContextMenuOpera(a,e)},b.addEventListener("mouseup",this.operaContext,!1);else{if(b.oncontextmenu!=null&&!b._oldContextMenuHandler)b._oldContextMenuHandler=b.oncontextmenu;
b.oncontextmenu=function(a){for(var b in dhtmlxMenuObjectLiveInstances)b!=e._UID&&dhtmlxMenuObjectLiveInstances[b].context&&dhtmlxMenuObjectLiveInstances[b]._hideContextMenu();a=a||event;a.cancelBubble=!0;a.returnValue=!1;e._doOnContextBeforeCall(a,this);return!1}}};
dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(a,b){for(var c in dhtmlxMenuObjectLiveInstances)c!=b._UID&&dhtmlxMenuObjectLiveInstances[c].context&&dhtmlxMenuObjectLiveInstances[c]._hideContextMenu();a.cancelBubble=!0;a.returnValue=!1;a.button==0&&a.ctrlKey==!0&&b._doOnContextBeforeCall(a,this);return!1};
dhtmlXMenuObject.prototype.removeContextZone=function(a){if(!this.isContextZone(a))return!1;a==document.body&&(a="document.body."+this.idPrefix);var b=this.contextZones[a];_isOpera?b.removeEventListener("mouseup",this.operaContext,!1):(b.oncontextmenu=b._oldContextMenuHandler!=null?b._oldContextMenuHandler:null,b._oldContextMenuHandler=null);try{this.contextZones[a]=null,delete this.contextZones[a]}catch(c){}return!0};
dhtmlXMenuObject.prototype.isContextZone=function(a){if(a==document.body&&this.contextZones["document.body."+this.idPrefix]!=null)return!0;var b=!1;this.contextZones[a]!=null&&this.contextZones[a]==document.getElementById(a)&&(b=!0);return b};dhtmlXMenuObject.prototype._isContextMenuVisible=function(){return this.idPull["polygon_"+this.idPrefix+this.topId]==null?!1:this.idPull["polygon_"+this.idPrefix+this.topId].style.display==""};
dhtmlXMenuObject.prototype._showContextMenu=function(a,b,c){this._clearAndHide();if(this.idPull["polygon_"+this.idPrefix+this.topId]==null)return!1;window.clearTimeout(this.menuTimeoutHandler);this.idPull[this.idPrefix+this.topId]=[a,b];this._showPolygon(this.idPrefix+this.topId,"bottom");this.callEvent("onContextMenu",[c])};
dhtmlXMenuObject.prototype._hideContextMenu=function(){if(this.idPull["polygon_"+this.idPrefix+this.topId]==null)return!1;this._clearAndHide();this._hidePolygon(this.idPrefix+this.topId);this.zInd=this.zIndInit};
dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(a,b){this.contextMenuZoneId=b.id;this._clearAndHide();this._hideContextMenu();var c=a.srcElement||a.target,d=_isIE||_isOpera||_KHTMLrv?a.offsetX:a.layerX,e=_isIE||_isOpera||_KHTMLrv?a.offsetY:a.layerY,f=getAbsoluteLeft(c)+d,g=getAbsoluteTop(c)+e;this.checkEvent("onBeforeContextMenu")?this.callEvent("onBeforeContextMenu",[b.id,a])&&this.contextAutoShow&&(this._showContextMenu(f,g),this.callEvent("onAfterContextMenu",[b.id,a])):this.contextAutoShow&&
(this._showContextMenu(f,g),this.callEvent("onAfterContextMenu",[b.id]))};dhtmlXMenuObject.prototype.showContextMenu=function(a,b){this._showContextMenu(a,b,!1)};dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()};
dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(!this._isVisibleArea)this.menuX1=document.body.scrollLeft,this.menuX2=this.menuX1+(window.innerWidth||document.body.clientWidth),this.menuY1=Math.max((_isIE?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),this.menuY2=this.menuY1+(_isIE?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight)};
dhtmlXMenuObject.prototype.getItemPosition=function(a){var a=this.idPrefix+a,b=-1;if(this.itemPull[a]==null)return b;for(var c=this.itemPull[a].parent,d=this.idPull["polygon_"+c]!=null?this.idPull["polygon_"+c].tbd:this.cont,e=0;e<d.childNodes.length;e++)if(d.childNodes[e]==this.idPull["separator_"+a]||d.childNodes[e]==this.idPull[a])b=e;return b};
dhtmlXMenuObject.prototype.setItemPosition=function(a,b){a=this.idPrefix+a;if(this.idPull[a]!=null){var c=this.itemPull[a].parent==this.idPrefix+this.topId,d=this.idPull[a],e=this.getItemPosition(a.replace(this.idPrefix,"")),f=this.itemPull[a].parent,g=this.idPull["polygon_"+f]!=null?this.idPull["polygon_"+f].tbd:this.cont;g.removeChild(g.childNodes[e]);b<0&&(b=0);c&&b<1&&(b=1);b<g.childNodes.length?g.insertBefore(d,g.childNodes[b]):g.appendChild(d)}};
dhtmlXMenuObject.prototype.getParentId=function(a){a=this.idPrefix+a;return this.itemPull[a]==null?null:(this.itemPull[a].parent!=null?this.itemPull[a].parent:this.topId).replace(this.idPrefix,"")};
dhtmlXMenuObject.prototype.addNewSibling=function(a,b,c,d,e,f){var g=this.idPrefix+(b!=null?b:this._genStr(24)),h=this.idPrefix+(a!=null?this.getParentId(a):this.topId);this._addItemIntoGlobalStrorage(g,h,c,"item",d,e,f);h==this.idPrefix+this.topId&&!this.context?this._renderToplevelItem(g,this.getItemPosition(a)):this._renderSublevelItem(g,this.getItemPosition(a))};
dhtmlXMenuObject.prototype.addNewChild=function(a,b,c,d,e,f,g){if(a==null)if(this.context)a=this.topId;else{this.addNewSibling(a,c,d,e,f,g);b!=null&&this.setItemPosition(c,b);return}c=this.idPrefix+(c!=null?c:this._genStr(24));this.setHotKey&&this.setHotKey(a,"");a=this.idPrefix+a;this._addItemIntoGlobalStrorage(c,a,d,"item",e,f,g);this.idPull["polygon_"+a]==null&&this._renderSublevelPolygon(a,a);this._renderSublevelItem(c,b-1);this._redefineComplexState(a)};
dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(a,b,c,d,e,f,g){var h={id:a,title:c,imgen:f!=null?f:"",imgdis:g!=null?g:"",type:d,state:e==!0?"disabled":"enabled",parent:b,complex:!1,hotkey:"",tip:""};this.itemPull[h.id]=h};
dhtmlXMenuObject.prototype._addSubMenuPolygon=function(a,b){for(var c=this._renderSublevelPolygon(a,b),d=this._getMenuNodes(b),e=0;e<d.length;e++)this.itemPull[d[e]].type=="separator"?this._renderSeparator(d[e],null):this._renderSublevelItem(d[e],null);for(var f=a==b?"topLevel":"subLevel",e=0;e<d.length;e++)this.itemPull[d[e]].complex&&this._addSubMenuPolygon(a,this.itemPull[d[e]].id)};
dhtmlXMenuObject.prototype._renderSublevelPolygon=function(a,b){var c=document.createElement("DIV");c.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Polygon "+(this._rtl?"dir_right":"");c.dir="ltr";c.oncontextmenu=function(a){a=a||event;a.returnValue=!1;a.cancelBubble=!0;return!1};c.id="polygon_"+b;c.onclick=function(a){a=a||event;a.cancelBubble=!0};c.style.display="none";document.body.insertBefore(c,document.body.firstChild);var d=document.createElement("TABLE");d.className="dhtmlxMebu_SubLevelArea_Tbl";
d.cellSpacing=0;d.cellPadding=0;d.border=0;var e=document.createElement("TBODY");d.appendChild(e);c.appendChild(d);c.tbl=d;c.tbd=e;this.idPull[c.id]=c;this.sxDacProc!=null&&(this.idPull["sxDac_"+b]=new this.sxDacProc(c,c.className),_isIE?(this.idPull["sxDac_"+b]._setSpeed(this.dacSpeedIE),this.idPull["sxDac_"+b]._setCustomCycle(this.dacCyclesIE)):(this.idPull["sxDac_"+b]._setSpeed(this.dacSpeed),this.idPull["sxDac_"+b]._setCustomCycle(this.dacCycles)));return c};
dhtmlXMenuObject.prototype._renderSublevelItem=function(a,b){var c=this,d=document.createElement("TR");d.className=this.itemPull[a].state=="enabled"?"sub_item":"sub_item_dis";var e=document.createElement("TD");e.className="sub_item_icon";var f=this.itemPull[a][this.itemPull[a].state=="enabled"?"imgen":"imgdis"];if(f!=""){var g=this.itemPull[a].type;if(g=="checkbox"||g=="radio"){var h=document.createElement("DIV");h.id="image_"+this.itemPull[a].id;h.className="sub_icon "+f;e.appendChild(h)}if(!(g==
"checkbox"||g=="radio"))h=document.createElement("IMG"),h.id="image_"+this.itemPull[a].id,h.className="sub_icon",h.src=this.imagePath+f,e.appendChild(h)}var i=document.createElement("TD");i.className="sub_item_text";if(this.itemPull[a].title!=""){var j=document.createElement("DIV");j.className="sub_item_text";j.innerHTML=this.itemPull[a].title;i.appendChild(j)}else i.innerHTML="&nbsp;";var k=document.createElement("TD");k.className="sub_item_hk";if(this.itemPull[a].complex){var o=document.createElement("DIV");
o.className="complex_arrow";o.id="arrow_"+this.itemPull[a].id;k.appendChild(o)}else if(this.itemPull[a].hotkey.length>0&&!this.itemPull[a].complex){var m=document.createElement("DIV");m.className="sub_item_hk";m.innerHTML=this.itemPull[a].hotkey;k.appendChild(m)}else k.innerHTML="&nbsp;";d.appendChild(this._rtl?k:e);d.appendChild(i);d.appendChild(this._rtl?e:k);d.id=this.itemPull[a].id;d.parent=this.itemPull[a].parent;if(this.itemPull[a].tip.length>0)d.title=this.itemPull[a].tip;d.onselectstart=function(a){a=
a||event;return a.returnValue=!1};d.onmouseover=function(){c.menuMode=="web"&&window.clearTimeout(c.menuTimeoutHandler);c._redistribSubLevelSelection(this.id,this.parent)};if(c.menuMode=="web")d.onmouseout=function(){window.clearTimeout(c.menuTimeoutHandler);c.menuTimeoutHandler=window.setTimeout(function(){c._clearAndHide()},c.menuTimeoutMsec,"JavaScript")};d.onclick=function(a){if(c.checkEvent("onClick")||!c.itemPull[this.id].complex){a=a||event;a.cancelBubble=!0;a.returnValue=!1;tc=c.itemPull[this.id].complex?
"c":"-";td=c.itemPull[this.id].state=="enabled"?"-":"d";var b={ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey};switch(c.itemPull[this.id].type){case "checkbox":c._checkboxOnClickHandler(this.id.replace(c.idPrefix,""),tc+td+"n",b);break;case "radio":c._radioOnClickHandler(this.id.replace(c.idPrefix,""),tc+td+"n",b);break;case "item":c._doOnClick(this.id.replace(c.idPrefix,""),tc+td+"n",b)}return!1}};var r=this.idPull["polygon_"+this.itemPull[a].parent];b!=null&&(b++,b<0&&(b=0),b>r.tbd.childNodes.length-
1&&(b=null));b!=null&&r.tbd.childNodes[b]!=null?r.tbd.insertBefore(d,r.tbd.childNodes[b]):r.tbd.appendChild(d);this.idPull[d.id]=d};
dhtmlXMenuObject.prototype._renderSeparator=function(a,b){var c=this.context?"SubLevelArea":this.itemPull[a].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea";if(!(c=="TopLevel"&&this.context)){var d=this;if(c!="TopLevel"){var e=document.createElement("TR");e.className="sub_sep";var f=document.createElement("TD");f.colSpan="3";e.appendChild(f)}var g=document.createElement("DIV");g.id="separator_"+a;g.className=c=="TopLevel"?"top_sep":"sub_sep";g.onselectstart=function(a){a=a||event;a.returnValue=
!1};g.onclick=function(a){a=a||event;a.cancelBubble=!0;var b={ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey};d._doOnClick(this.id.replace("separator_"+d.idPrefix,""),"--s",b)};if(c=="TopLevel"){if(b!=null)b++,b<0&&(b=0),this.cont.childNodes[b]!=null?this.cont.insertBefore(g,this.cont.childNodes[b]):this.cont.appendChild(g);else{var h=this.cont.childNodes[this.cont.childNodes.length-1];String(h).search("TopLevel_Text")==-1?this.cont.appendChild(g):this.cont.insertBefore(g,h)}this.idPull[g.id]=g}else{var i=
this.idPull["polygon_"+this.itemPull[a].parent];b!=null&&(b++,b<0&&(b=0),b>i.tbd.childNodes.length-1&&(b=null));b!=null&&i.tbd.childNodes[b]!=null?i.tbd.insertBefore(e,i.tbd.childNodes[b]):i.tbd.appendChild(e);f.appendChild(g);this.idPull[g.id]=e}}};dhtmlXMenuObject.prototype.addNewSeparator=function(a,b){var b=this.idPrefix+(b!=null?b:this._genStr(24)),c=this.idPrefix+this.getParentId(a);this._addItemIntoGlobalStrorage(b,c,"","separator",!1,"","");this._renderSeparator(b,this.getItemPosition(a))};
dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()};dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,!0);this._isInited=!1;this.idPrefix=this._genStr(12)};
dhtmlXMenuObject.prototype.unload=function(){_isIE?(document.body.detachEvent("onclick",this._bodyClick),document.body.detachEvent("oncontextmenu",this._bodyContext)):(window.removeEventListener("click",this._bodyClick,!1),window.removeEventListener("contextmenu",this._bodyContext,!1));this._bodyContext=this._bodyClick=null;this.removeItem(this.idPrefix+this.topId,!0);this.idPull=this.itemPull=null;if(this.context)for(var a in this.contextZones)this.removeContextZone(a);if(this.cont!=null)this.cont.className=
"",this.cont.parentNode.removeChild(this.cont),this.cont=null;if(this.base!=null){this.base.className="";if(!this.context)this.base.oncontextmenu=this.base._oldContextMenuHandler||null;this.base=this.base.onselectstart=null}this.setSkin=null;this.detachAllEvents();if(this._xmlLoader)this._xmlLoader.destructor(),this._xmlLoader=null;this.extendedModule=this.serialize=this.addCheckbox=this.getCheckboxState=this.setCheckboxState=this.addRadioButton=this.setRadioChecked=this.getRadioChecked=this.userData=
this.setOverflowHeight=this.contextZones=this.getCircuit=this.clearHref=this.setHref=this.setAlign=this.setRTL=this.setTopText=this.setItemSelected=this.getHotKey=this.setHotKey=this.getTooltip=this.setTooltip=this.setVisibleArea=this.getContextMenuHideAllMode=this.setContextMenuHideAllMode=this.setAutoHideMode=this.setAutoShowMode=this.clearItemImage=this.setItemImage=this.getItemImage=this.enableDynamicLoading=this.setWebModeTimeout=this.setOpenMode=this.getUserData=this.setUserData=this.isItemHidden=
this.showItem=this.hideItem=this.loadFromHTML=this.setItemText=this.getItemText=this.isItemEnabled=this.setItemDisabled=this.setItemEnabled=this._removeArrow=this._checkboxOnClickHandler=this._updateCheckboxImage=this._readLevel=this._setCheckboxState=this._getCheckboxState=this._radioOnClickHandler=this._setRadioState=this._getRadioImgObj=this._countPolygonItems=this._doScrollDown=this._doScrollUp=this._isArrowExists=this._removeDownArrow=this._removeUpArrow=this._addDownArrow=this._addUpArrow=this._checkArrowsState=
this._clearAllSelectedSubItemsInPolygon=this._updateLoaderIcon=this._changeItemVisible=this._changeItemState=this.hideContextMenu=this.showContextMenu=this.hide=this.detachAllEvents=this.radio=this.items=this.unload=this.dhx_Event=this.detachEvent=this.eventCatcher=this.checkEvent=this.callEvent=this.attachEvent=this.addNewSeparator=this.addNewChild=this.addNewSibling=this.getParentId=this.setItemPosition=this.getItemPosition=this.clearAll=this._hideContextMenu=this._renderSeparator=this._renderSublevelItem=
this._renderSublevelPolygon=this._addSubMenuPolygon=this._addItemIntoGlobalStrorage=this._autoDetectVisibleArea=this._doOnContextBeforeCall=this._showContextMenu=this._isContextMenuVisible=this.isContextZone=this.removeContextZone=this.addContextZone=this.renderAsContextMenu=this._getAllParents=this.removeItem=this._updateItemImage=this.setIconPath=this.setIconsPath=this.setImagePath=this._renderToplevelItem=this._initTopLevelMenu=this._redistribTopLevelSelection=this._getItemLevelType=this._updateItemComplexState=
this._redefineComplexState=this._countVisiblePolygonItems=this._hideSubLevelItem=this._showSubLevelItem=this._xmlParser=this._buildMenu=this.loadXMLString=this.loadXML=this.init=this.forEachItem=this.getItemType=this._doOnLoad=this._clearAndHide=this._genStr=this._getMenuNodes=this._searchMenuNode=this._doOnTouchMenu=this._doOnClick=this._redistribSubLevelSelection=this._showPolygon=this._hidePolygon=this._getSubItemToDeselectByPolygon=this._removeSubItemFromSelected=this._addSubItemToSelected=this._openedPolygons=
this._selectedSubItems=this._enableDacSupport=this.zIndStep=this.zIndInit=this.zInd=this.dacSpeedIE=this.dacSpeed=this.dacCyclesIE=this.dacCycles=this.topId=this.skin=this.userDataTagName=this.itemTipTagName=this.itemTextTagName=this.itemTagName=this.itemHrefTagName=this.itemHotKeyTagName=this.isDhtmlxMenuObject=this.menuTouched=this.menuTimeoutMsec=this.menuTimeoutHandler=this.menuModeTopLevelTimeoutTime=this.menuModeTopLevelTimeout=this.menuMode=this.imagePath=this.idPrefix=this.menuLastClicked=
this.menuSelected=this.limit=this.dirTopLevel=this.dirSubLevel=this.fixedPosition=this.loaderIcon=this.dLoadUrl=this.dLoadSign=this.dLoad=this.contextMenuZoneId=this.contextHideAllMode=this.contextAutoShow=this.contextAutoHide=this.context=this.addBaseIdAsContextZone=this._topLevelRightMargin=this._topLevelBottomMargin=this._topLevelOffsetLeft=this._topLevelBottomMargin=this._scrollUpTMTime=this._scrollUpTMStep=this._scrollDownTMTime=this._scrollDownTMStep=this._rtl=this._isInited=this._isIE6=this._arrowFFFix=
this._align=null;dhtmlxMenuObjectLiveInstances[this._UID]=null;try{delete dhtmlxMenuObjectLiveInstances[this._UID]}catch(b){}this._UID=null};var dhtmlxMenuObjectLiveInstances={};dhtmlXMenuObject.prototype.i18n={dhxmenuextalert:"dhtmlxmenu_ext.js required"};
(function(){dhtmlx.extend_api("dhtmlXMenuObject",{_init:function(a){return[a.parent,a.skin]},align:"setAlign",top_text:"setTopText",context:"renderAsContextMenu",icon_path:"setIconsPath",open_mode:"setOpenMode",rtl:"setRTL",skin:"setSkin",dynamic:"enableDynamicLoading",xml:"loadXML",items:"items",overflow:"setOverflowHeight"},{items:function(a,b){for(var c=1E5,d=null,e=0;e<a.length;e++){var f=a[e];f.type=="separator"?(this.addNewSeparator(d,c,f.id),d=f.id):(this.addNewChild(b,c,f.id,f.text,f.disabled,
f.img,f.img_disabled),d=f.id,f.items&&this.items(f.items,f.id))}}})})();dhtmlXMenuObject.prototype.extendedModule="DHXMENUEXT";dhtmlXMenuObject.prototype.setItemEnabled=function(a){this._changeItemState(a,"enabled",this._getItemLevelType(a))};dhtmlXMenuObject.prototype.setItemDisabled=function(a){this._changeItemState(a,"disabled",this._getItemLevelType(a))};
dhtmlXMenuObject.prototype.isItemEnabled=function(a){return this.itemPull[this.idPrefix+a]!=null?this.itemPull[this.idPrefix+a].state=="enabled":!1};
dhtmlXMenuObject.prototype._changeItemState=function(a,b,c){var d=!1,e=this.idPrefix+a;if(this.itemPull[e]!=null&&this.idPull[e]!=null&&this.itemPull[e].state!=b)this.itemPull[e].state=b,this.idPull[e].className=this.itemPull[e].parent==this.idPrefix+this.topId&&!this.context?"dhtmlxMenu_"+this.skin+"_TopLevel_Item_"+(this.itemPull[e].state=="enabled"?"Normal":"Disabled"):"sub_item"+(this.itemPull[e].state=="enabled"?"":"_dis"),this._updateItemComplexState(this.idPrefix+a,this.itemPull[this.idPrefix+
a].complex,!1),this._updateItemImage(a,c),this.idPrefix+this.menuLastClicked==e&&c!="TopLevel"&&this._redistribSubLevelSelection(e,this.itemPull[e].parent);return d};dhtmlXMenuObject.prototype.getItemText=function(a){return this.itemPull[this.idPrefix+a]!=null?this.itemPull[this.idPrefix+a].title:""};
dhtmlXMenuObject.prototype.setItemText=function(a,b){a=this.idPrefix+a;if(this.itemPull[a]!=null&&this.idPull[a]!=null)if(this._clearAndHide(),this.itemPull[a].title=b,this.itemPull[a].parent==this.idPrefix+this.topId&&!this.context){for(var c=null,d=0;d<this.idPull[a].childNodes.length;d++)try{this.idPull[a].childNodes[d].className=="top_level_text"&&(c=this.idPull[a].childNodes[d])}catch(e){}if(String(this.itemPull[a].title).length==""||this.itemPull[a].title==null)c!=null&&c.parentNode.removeChild(c);
else{if(!c)c=document.createElement("DIV"),c.className="top_level_text",this._rtl&&this.idPull[a].childNodes.length>0?this.idPull[a].insertBefore(c,this.idPull[a].childNodes[0]):this.idPull[a].appendChild(c);c.innerHTML=this.itemPull[a].title}}else{c=null;for(d=0;d<this.idPull[a].childNodes[1].childNodes.length;d++)if(String(this.idPull[a].childNodes[1].childNodes[d].className||"")=="sub_item_text")c=this.idPull[a].childNodes[1].childNodes[d];if(String(this.itemPull[a].title).length==""||this.itemPull[a].title==
null){if(c)c.parentNode.removeChild(c),c=null,this.idPull[a].childNodes[1].innerHTML="&nbsp;"}else{if(!c)c=document.createElement("DIV"),c.className="sub_item_text",this.idPull[a].childNodes[1].innerHTML="",this.idPull[a].childNodes[1].appendChild(c);c.innerHTML=this.itemPull[a].title}}};dhtmlXMenuObject.prototype.loadFromHTML=function(a,b,c){this.itemTagName="DIV";typeof a=="string"&&(a=document.getElementById(a));this._buildMenu(a,null);this.init();b&&a.parentNode.removeChild(a);c!=null&&c()};
dhtmlXMenuObject.prototype.hideItem=function(a){this._changeItemVisible(a,!1)};dhtmlXMenuObject.prototype.showItem=function(a){this._changeItemVisible(a,!0)};dhtmlXMenuObject.prototype.isItemHidden=function(a){var b=null;this.idPull[this.idPrefix+a]!=null&&(b=this.idPull[this.idPrefix+a].style.display=="none");return b};
dhtmlXMenuObject.prototype._changeItemVisible=function(a,b){var c=this.idPrefix+a;if(this.itemPull[c]!=null&&(this.itemPull[c].type=="separator"&&(c="separator_"+c),this.idPull[c]!=null))this.idPull[c].style.display=b?"":"none",this._redefineComplexState(this.itemPull[this.idPrefix+a].parent)};dhtmlXMenuObject.prototype.setUserData=function(a,b,c){this.userData[this.idPrefix+a+"_"+b]=c};
dhtmlXMenuObject.prototype.getUserData=function(a,b){return this.userData[this.idPrefix+a+"_"+b]!=null?this.userData[this.idPrefix+a+"_"+b]:null};dhtmlXMenuObject.prototype.setOpenMode=function(a){if(a=="win"||a=="web")this.menuMode=a};dhtmlXMenuObject.prototype.setWebModeTimeout=function(a){this.menuTimeoutMsec=!isNaN(a)?a:400};
dhtmlXMenuObject.prototype.enableDynamicLoading=function(a,b){this.dLoad=!0;this.dLoadUrl=a;this.dLoadSign=String(this.dLoadUrl).search(/\?/)==-1?"?":"&";this.loaderIcon=b;this.init()};
dhtmlXMenuObject.prototype._updateLoaderIcon=function(a,b){if(this.idPull[a]!=null&&!(String(this.idPull[a].className).search("TopLevel_Item")>=0)){var c=this._rtl?0:2;if(this.idPull[a].childNodes[c]&&this.idPull[a].childNodes[c].childNodes[0]){var d=this.idPull[a].childNodes[c].childNodes[0];if(String(d.className).search("complex_arrow")===0)d.className="complex_arrow"+(b?"_loading":"")}}};
dhtmlXMenuObject.prototype.getItemImage=function(a){var b=[null,null],a=this.idPrefix+a;if(this.itemPull[a].type=="item")b[0]=this.itemPull[a].imgen,b[1]=this.itemPull[a].imgdis;return b};dhtmlXMenuObject.prototype.setItemImage=function(a,b,c){if(this.itemPull[this.idPrefix+a].type=="item")this.itemPull[this.idPrefix+a].imgen=b,this.itemPull[this.idPrefix+a].imgdis=c,this._updateItemImage(a,this._getItemLevelType(a))};dhtmlXMenuObject.prototype.clearItemImage=function(a){this.setItemImage(a,"","")};
dhtmlXMenuObject.prototype.setAutoShowMode=function(a){this.contextAutoShow=a==!0?!0:!1};dhtmlXMenuObject.prototype.setAutoHideMode=function(a){this.contextAutoHide=a==!0?!0:!1};dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(a){this.contextHideAllMode=a==!0?!0:!1};dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.contextHideAllMode};
dhtmlXMenuObject.prototype.setVisibleArea=function(a,b,c,d){this._isVisibleArea=!0;this.menuX1=a;this.menuX2=b;this.menuY1=c;this.menuY2=d};dhtmlXMenuObject.prototype.setTooltip=function(a,b){a=this.idPrefix+a;if(this.itemPull[a]!=null&&this.idPull[a]!=null)this.idPull[a].title=b.length>0?b:null,this.itemPull[a].tip=b};dhtmlXMenuObject.prototype.getTooltip=function(a){return this.itemPull[this.idPrefix+a]==null?null:this.itemPull[this.idPrefix+a].tip};
dhtmlXMenuObject.prototype.setHotKey=function(a,b){a=this.idPrefix+a;if(this.itemPull[a]!=null&&this.idPull[a]!=null&&(this.itemPull[a].parent!=this.idPrefix+this.topId||this.context)&&!this.itemPull[a].complex){var c=this.itemPull[a].type;if(c=="item"||c=="checkbox"||c=="radio"){var d=null;try{if(this.idPull[a].childNodes[this._rtl?0:2].childNodes[0].className=="sub_item_hk")d=this.idPull[a].childNodes[this._rtl?0:2].childNodes[0]}catch(e){}if(b.length==0)this.itemPull[a].hotkey_backup=this.itemPull[a].hotkey,
this.itemPull[a].hotkey="",d!=null&&d.parentNode.removeChild(d);else{this.itemPull[a].hotkey=b;this.itemPull[a].hotkey_backup=null;if(d==null){d=document.createElement("DIV");d.className="sub_item_hk";for(var f=this.idPull[a].childNodes[this._rtl?0:2];f.childNodes.length>0;)f.removeChild(f.childNodes[0]);f.appendChild(d)}d.innerHTML=b}}}};dhtmlXMenuObject.prototype.getHotKey=function(a){return this.itemPull[this.idPrefix+a]==null?null:this.itemPull[this.idPrefix+a].hotkey};
dhtmlXMenuObject.prototype.setItemSelected=function(a){if(this.itemPull[this.idPrefix+a]==null)return null};dhtmlXMenuObject.prototype.setTopText=function(a){if(!this.context){if(this._topText==null)this._topText=document.createElement("DIV"),this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this._rtl?"left":this._align=="left"?"right":"left"),this.base.appendChild(this._topText);this._topText.innerHTML=a}};
dhtmlXMenuObject.prototype.setAlign=function(a){if(this._align!=a&&(a=="left"||a=="right")){this._align=a;if(this.cont)this.cont.className=this._align=="right"?"align_right":"align_left";if(this._topText!=null)this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this._align=="left"?"right":"left")}};dhtmlXMenuObject.prototype.setHref=function(a,b,c){if(this.itemPull[this.idPrefix+a]!=null)this.itemPull[this.idPrefix+a].href_link=b,c!=null&&(this.itemPull[this.idPrefix+a].href_target=c)};
dhtmlXMenuObject.prototype.clearHref=function(a){this.itemPull[this.idPrefix+a]!=null&&(delete this.itemPull[this.idPrefix+a].href_link,delete this.itemPull[this.idPrefix+a].href_target)};dhtmlXMenuObject.prototype.getCircuit=function(a){for(var b=Array(a);this.getParentId(a)!=this.topId;)a=this.getParentId(a),b[b.length]=a;return b.reverse()};
dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(a){for(var b=this._getSubItemToDeselectByPolygon(a),c=0;c<this._openedPolygons.length;c++)this._openedPolygons[c]!=a&&this._hidePolygon(this._openedPolygons[c]);for(c=0;c<b.length;c++)if(this.idPull[b[c]]!=null&&this.itemPull[b[c]].state=="enabled")this.idPull[b[c]].className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Item_Normal"};
dhtmlXMenuObject.prototype._checkArrowsState=function(a){var b=this.idPull["polygon_"+a],c=this.idPull["arrowup_"+a],d=this.idPull["arrowdown_"+a];c.className=b.scrollTop==0?"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp_Disabled":"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp"+(c.over?"_Over":"");d.className=b.scrollTop+b.offsetHeight<b.scrollHeight?"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown"+(d.over?"_Over":""):"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown_Disabled"};
dhtmlXMenuObject.prototype._addUpArrow=function(a){var b=this,c=document.createElement("DIV");c.pId=this.idPrefix+a;c.id="arrowup_"+this.idPrefix+a;c.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp";c.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>";c.style.display="none";c.over=!1;c.onselectstart=function(a){a=a||event;return a.returnValue=!1};c.oncontextmenu=function(a){a=a||event;return a.returnValue=!1};
c.onmouseover=function(){b.menuMode=="web"&&window.clearTimeout(b.menuTimeoutHandler);b._clearAllSelectedSubItemsInPolygon(this.pId);if(this.className!="dhtmlxMenu_"+b.skin+"_SubLevelArea_ArrowUp_Disabled")this.className="dhtmlxMenu_"+b.skin+"_SubLevelArea_ArrowUp_Over",this.over=!0,b._canScrollUp=!0,b._doScrollUp(this.pId,!0)};c.onmouseout=function(){if(b.menuMode=="web")window.clearTimeout(b.menuTimeoutHandler),b.menuTimeoutHandler=window.setTimeout(function(){b._clearAndHide()},b.menuTimeoutMsec,
"JavaScript");this.over=!1;b._canScrollUp=!1;if(this.className!="dhtmlxMenu_"+b.skin+"_SubLevelArea_ArrowUp_Disabled")this.className="dhtmlxMenu_"+b.skin+"_SubLevelArea_ArrowUp",window.clearTimeout(b._scrollUpTM)};c.onclick=function(a){a=a||event;a.returnValue=!1;a.cancelBubble=!0;return!1};document.body.insertBefore(c,document.body.firstChild);this.idPull[c.id]=c};
dhtmlXMenuObject.prototype._addDownArrow=function(a){var b=this,c=document.createElement("DIV");c.pId=this.idPrefix+a;c.id="arrowdown_"+this.idPrefix+a;c.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown";c.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>";c.style.display="none";c.over=!1;c.onselectstart=function(a){a=a||event;return a.returnValue=!1};c.oncontextmenu=function(a){a=a||event;return a.returnValue=
!1};c.onmouseover=function(){b.menuMode=="web"&&window.clearTimeout(b.menuTimeoutHandler);b._clearAllSelectedSubItemsInPolygon(this.pId);if(this.className!="dhtmlxMenu_"+b.skin+"_SubLevelArea_ArrowDown_Disabled")this.className="dhtmlxMenu_"+b.skin+"_SubLevelArea_ArrowDown_Over",this.over=!0,b._canScrollDown=!0,b._doScrollDown(this.pId,!0)};c.onmouseout=function(){if(b.menuMode=="web")window.clearTimeout(b.menuTimeoutHandler),b.menuTimeoutHandler=window.setTimeout(function(){b._clearAndHide()},b.menuTimeoutMsec,
"JavaScript");this.over=!1;b._canScrollDown=!1;if(this.className!="dhtmlxMenu_"+b.skin+"_SubLevelArea_ArrowDown_Disabled")this.className="dhtmlxMenu_"+b.skin+"_SubLevelArea_ArrowDown",window.clearTimeout(b._scrollDownTM)};c.onclick=function(a){a=a||event;a.returnValue=!1;a.cancelBubble=!0;return!1};document.body.insertBefore(c,document.body.firstChild);this.idPull[c.id]=c};dhtmlXMenuObject.prototype._removeUpArrow=function(a){var b="arrowup_"+this.idPrefix+a;this._removeArrow(b)};
dhtmlXMenuObject.prototype._removeDownArrow=function(a){var b="arrowdown_"+this.idPrefix+a;this._removeArrow(b)};dhtmlXMenuObject.prototype._removeArrow=function(a){var b=this.idPull[a];b.onselectstart=null;b.oncontextmenu=null;b.onmouseover=null;b.onmouseout=null;b.onclick=null;b.parentNode&&b.parentNode.removeChild(b);b=null;this.idPull[a]=null;try{delete this.idPull[a]}catch(c){}};
dhtmlXMenuObject.prototype._isArrowExists=function(a){return this.idPull["arrowup_"+a]!=null&&this.idPull["arrowdown_"+a]!=null?!0:!1};dhtmlXMenuObject.prototype._doScrollUp=function(a,b){var c=this.idPull["polygon_"+a];if(this._canScrollUp&&c.scrollTop>0){var d=!1,e=c.scrollTop-this._scrollUpTMStep;e<0&&(d=!0,e=0);c.scrollTop=e;if(!d){var f=this;this._scrollUpTM=window.setTimeout(function(){f._doScrollUp(a,!1)},this._scrollUpTMTime)}}else this._canScrollUp=!1,this._checkArrowsState(a);b&&this._checkArrowsState(a)};
dhtmlXMenuObject.prototype._doScrollDown=function(a,b){var c=this.idPull["polygon_"+a];if(this._canScrollDown&&c.scrollTop+c.offsetHeight<=c.scrollHeight){var d=!1,e=c.scrollTop+this._scrollDownTMStep;e+c.offsetHeight>c.scollHeight&&(d=!0,e=c.scollHeight-c.offsetHeight);c.scrollTop=e;if(!d){var f=this;this._scrollDownTM=window.setTimeout(function(){f._doScrollDown(a,!1)},this._scrollDownTMTime)}}else this._checkArrowsState(a);b&&this._checkArrowsState(a)};
dhtmlXMenuObject.prototype._countPolygonItems=function(a){var b=0,c;for(c in this.itemPull){var d=this.itemPull[c].parent,e=this.itemPull[c].type;d==this.idPrefix+a&&(e=="item"||e=="radio"||e=="checkbox")&&b++}return b};
dhtmlXMenuObject.prototype.setOverflowHeight=function(a){if(!(this.limit==0&&a<=0))if(this._clearAndHide(),this.limit>=0&&a>0)this.limit=a;else if(this.limit>0&&a<=0){for(var b in this.itemPull)if(this._isArrowExists(b)){var c=String(b).replace(this.idPrefix,"");this._removeUpArrow(c);this._removeDownArrow(c);this.idPull["polygon_"+b].style.height=""}this.limit=0}};
dhtmlXMenuObject.prototype._getRadioImgObj=function(a){try{var b=this.idPull[this.idPrefix+a].childNodes[this._rtl?2:0].childNodes[0]}catch(c){b=null}return b};dhtmlXMenuObject.prototype._setRadioState=function(a,b){var c=this._getRadioImgObj(a);if(c!=null){var d=this.itemPull[this.idPrefix+a];d.checked=b;d.imgen="rdbt_"+(d.checked?"1":"0");d.imgdis=d.imgen;c.className="sub_icon "+d.imgen}};
dhtmlXMenuObject.prototype._radioOnClickHandler=function(a,b,c){if(!(b.charAt(1)=="d"||this.itemPull[this.idPrefix+a].group==null)){var d=this.itemPull[this.idPrefix+a].group;this.checkEvent("onRadioClick")?this.callEvent("onRadioClick",[d,this.getRadioChecked(d),a,this.contextMenuZoneId,c])&&this.setRadioChecked(d,a):this.setRadioChecked(d,a);this.checkEvent("onClick")&&this.callEvent("onClick",[a])}};
dhtmlXMenuObject.prototype.getRadioChecked=function(a){for(var b=null,c=0;c<this.radio[a].length;c++){var d=this.radio[a][c].replace(this.idPrefix,""),e=this._getRadioImgObj(d);if(e!=null){var f=e.className.match(/rdbt_1$/gi);f!=null&&(b=d)}}return b};dhtmlXMenuObject.prototype.setRadioChecked=function(a,b){if(this.radio[a]!=null)for(var c=0;c<this.radio[a].length;c++){var d=this.radio[a][c].replace(this.idPrefix,"");this._setRadioState(d,d==b)}};
dhtmlXMenuObject.prototype.addRadioButton=function(a,b,c,d,e,f,g,h){if(!(this.context&&b==this.topId)){if(this.itemPull[this.idPrefix+b]==null)return;if(a=="child"&&this.itemPull[this.idPrefix+b].type!="item")return}var i=this.idPrefix+(d!=null?d:this._genStr(24)),j="rdbt_"+(g?"1":"0"),k=j;if(a=="sibling"){var o=this.idPrefix+this.getParentId(b);this._addItemIntoGlobalStrorage(i,o,e,"radio",h,j,k);this._renderSublevelItem(i,this.getItemPosition(b))}else o=this.idPrefix+b,this._addItemIntoGlobalStrorage(i,
o,e,"radio",h,j,k),this.idPull["polygon_"+o]==null&&this._renderSublevelPolygon(o,o),this._renderSublevelItem(i,c-1),this._redefineComplexState(o);var m=f!=null?f:this._genStr(24);this.itemPull[i].group=m;this.radio[m]==null&&(this.radio[m]=[]);this.radio[m][this.radio[m].length]=i;g==!0&&this.setRadioChecked(m,String(i).replace(this.idPrefix,""))};dhtmlXMenuObject.prototype._getCheckboxState=function(a){return this.itemPull[this.idPrefix+a]==null?null:this.itemPull[this.idPrefix+a].checked};
dhtmlXMenuObject.prototype._setCheckboxState=function(a,b){this.itemPull[this.idPrefix+a]!=null&&(this.itemPull[this.idPrefix+a].checked=b)};
dhtmlXMenuObject.prototype._updateCheckboxImage=function(a){if(this.idPull[this.idPrefix+a]!=null){this.itemPull[this.idPrefix+a].imgen="chbx_"+(this._getCheckboxState(a)?"1":"0");this.itemPull[this.idPrefix+a].imgdis=this.itemPull[this.idPrefix+a].imgen;try{this.idPull[this.idPrefix+a].childNodes[this._rtl?2:0].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+a].imgen}catch(b){}}};
dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(a,b,c){if(b.charAt(1)!="d"&&this.itemPull[this.idPrefix+a]!=null){var d=this._getCheckboxState(a);this.checkEvent("onCheckboxClick")?this.callEvent("onCheckboxClick",[a,d,this.contextMenuZoneId,c])&&this.setCheckboxState(a,!d):this.setCheckboxState(a,!d);this.checkEvent("onClick")&&this.callEvent("onClick",[a])}};dhtmlXMenuObject.prototype.setCheckboxState=function(a,b){this._setCheckboxState(a,b);this._updateCheckboxImage(a)};
dhtmlXMenuObject.prototype.getCheckboxState=function(a){return this._getCheckboxState(a)};
dhtmlXMenuObject.prototype.addCheckbox=function(a,b,c,d,e,f,g){if(!(this.context&&b==this.topId)){if(this.itemPull[this.idPrefix+b]==null)return;if(a=="child"&&this.itemPull[this.idPrefix+b].type!="item")return}var h="chbx_"+(f?"1":"0"),i=h;if(a=="sibling"){var j=this.idPrefix+(d!=null?d:this._genStr(24)),k=this.idPrefix+this.getParentId(b);this._addItemIntoGlobalStrorage(j,k,e,"checkbox",g,h,i);this.itemPull[j].checked=f;this._renderSublevelItem(j,this.getItemPosition(b))}else j=this.idPrefix+(d!=
null?d:this._genStr(24)),k=this.idPrefix+b,this._addItemIntoGlobalStrorage(j,k,e,"checkbox",g,h,i),this.itemPull[j].checked=f,this.idPull["polygon_"+k]==null&&this._renderSublevelPolygon(k,k),this._renderSublevelItem(j,c-1),this._redefineComplexState(k)};
dhtmlXMenuObject.prototype._readLevel=function(a){var b="",c;for(c in this.itemPull)if(this.itemPull[c].parent==a){var d="",e="",f="",g=String(this.itemPull[c].id).replace(this.idPrefix,""),h="",i=this.itemPull[c].title!=""?' text="'+this.itemPull[c].title+'"':"",j="";this.itemPull[c].type=="item"&&(this.itemPull[c].imgen!=""&&(d=' img="'+this.itemPull[c].imgen+'"'),this.itemPull[c].imgdis!=""&&(e=' imgdis="'+this.itemPull[c].imgdis+'"'),this.itemPull[c].hotkey!=""&&(f="<hotkey>"+this.itemPull[c].hotkey+
"</hotkey>"));this.itemPull[c].type=="separator"?h=' type="separator"':this.itemPull[c].state=="disabled"&&(j=' enabled="false"');this.itemPull[c].type=="checkbox"&&(h=' type="checkbox"'+(this.itemPull[c].checked?' checked="true"':""));this.itemPull[c].type=="radio"&&(h=' type="radio" group="'+this.itemPull[c].group+'" '+(this.itemPull[c].checked?' checked="true"':""));b+="<item id='"+g+"'"+i+h+d+e+j+">";b+=f;this.itemPull[c].complex&&(b+=this._readLevel(c));b+="</item>"}return b};
dhtmlXMenuObject.prototype.serialize=function(){var a="<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>";return a};
function dataProcessor(a){this.serverProcessor=a;this.action_param="!nativeeditor_status";this.object=null;this.updatedRows=[];this.autoUpdate=!0;this.updateMode="cell";this._tMode="GET";this.post_delim="_";this._waitMode=0;this._in_progress={};this._invalid={};this.mandatoryFields=[];this.messages=[];this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",clear:"font-weight:normal;text-decoration:none;"};
this.enableUTFencoding(!0);dhtmlxEventable(this);return this}
dataProcessor.prototype={setTransactionMode:function(a,b){this._tMode=a;this._tSend=b},escape:function(a){return this._utf?encodeURIComponent(a):escape(a)},enableUTFencoding:function(a){this._utf=convertStringToBoolean(a)},setDataColumns:function(a){this._columns=typeof a=="string"?a.split(","):a},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(a){this._endnm=convertStringToBoolean(a)},enablePartialDataSend:function(a){this._changed=convertStringToBoolean(a)},setUpdateMode:function(a,
b){this.autoUpdate=a=="cell";this.updateMode=a;this.dnd=b},ignore:function(a,b){this._silent_mode=!0;a.call(b||window);this._silent_mode=!1},setUpdated:function(a,b,c){if(!this._silent_mode){var d=this.findRow(a),c=c||"updated",e=this.obj.getUserData(a,this.action_param);e&&c=="updated"&&(c=e);b?(this.set_invalid(a,!1),this.updatedRows[d]=a,this.obj.setUserData(a,this.action_param,c),this._in_progress[a]&&(this._in_progress[a]="wait")):this.is_invalid(a)||(this.updatedRows.splice(d,1),this.obj.setUserData(a,
this.action_param,""));b||this._clearUpdateFlag(a);this.markRow(a,b,c);b&&this.autoUpdate&&this.sendData(a)}},_clearUpdateFlag:function(){},markRow:function(a,b,c){var d="",e=this.is_invalid(a);e&&(d=this.styles[e],b=!0);if(this.callEvent("onRowMark",[a,b,c,e])&&(d=this.styles[b?c:"clear"]+d,this.obj[this._methods[0]](a,d),e&&e.details)){d+=this.styles[e+"_cell"];for(var f=0;f<e.details.length;f++)if(e.details[f])this.obj[this._methods[1]](a,f,d)}},getState:function(a){return this.obj.getUserData(a,
this.action_param)},is_invalid:function(a){return this._invalid[a]},set_invalid:function(a,b,c){c&&(b={value:b,details:c,toString:function(){return this.value.toString()}});this._invalid[a]=b},checkBeforeUpdate:function(){return!0},sendData:function(a){if(!this._waitMode||!(this.obj.mytype=="tree"||this.obj._h2)){this.obj.editStop&&this.obj.editStop();if(typeof a=="undefined"||this._tSend)return this.sendAllData();if(this._in_progress[a])return!1;this.messages=[];if(!this.checkBeforeUpdate(a)&&this.callEvent("onValidationError",
[a,this.messages]))return!1;this._beforeSendData(this._getRowData(a),a)}},_beforeSendData:function(a,b){if(!this.callEvent("onBeforeUpdate",[b,this.getState(b),a]))return!1;this._sendData(a,b)},serialize:function(a,b){if(typeof a=="string")return a;if(typeof b!="undefined")return this.serialize_one(a,"");else{var c=[],d=[],e;for(e in a)a.hasOwnProperty(e)&&(c.push(this.serialize_one(a[e],e+this.post_delim)),d.push(e));c.push("ids="+this.escape(d.join(",")));return c.join("&")}},serialize_one:function(a,
b){if(typeof a=="string")return a;var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push(this.escape((b||"")+d)+"="+this.escape(a[d]));return c.join("&")},_sendData:function(a,b){if(a){if(!this.callEvent("onBeforeDataSending",b?[b,this.getState(b),a]:[null,null,a]))return!1;b&&(this._in_progress[b]=(new Date).valueOf());var c=new dtmlXMLLoaderObject(this.afterUpdate,this,!0),d=this.serverProcessor+(this._user?getUrlSymbol(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,
"version")].join("&"):"");this._tMode!="POST"?c.loadXML(d+(d.indexOf("?")!=-1?"&":"?")+this.serialize(a,b)):c.loadXML(d,!0,this.serialize(a,b));this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var a=!0,b=0;b<this.updatedRows.length;b++)a&=this.checkBeforeUpdate(this.updatedRows[b]);if(!a&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(b=0;b<this.updatedRows.length;b++)if(!this._in_progress[this.updatedRows[b]]&&
!this.is_invalid(this.updatedRows[b])&&(this._beforeSendData(this._getRowData(this.updatedRows[b]),this.updatedRows[b]),this._waitMode&&(this.obj.mytype=="tree"||this.obj._h2)))break}},_getAllData:function(){for(var a={},b=!1,c=0;c<this.updatedRows.length;c++){var d=this.updatedRows[c];!this._in_progress[d]&&!this.is_invalid(d)&&this.callEvent("onBeforeUpdate",[d,this.getState(d)])&&(a[d]=this._getRowData(d,d+this.post_delim),b=!0,this._in_progress[d]=(new Date).valueOf())}return b?a:null},setVerificator:function(a,
b){this.mandatoryFields[a]=b||function(a){return a!=""}},clearVerificator:function(a){this.mandatoryFields[a]=!1},findRow:function(a){for(var b=0,b=0;b<this.updatedRows.length;b++)if(a==this.updatedRows[b])break;return b},defineAction:function(a,b){if(!this._uActions)this._uActions=[];this._uActions[a]=b},afterUpdateCallback:function(a,b,c,d){var e=a,f=c!="error"&&c!="invalid";f||this.set_invalid(a,c);if(this._uActions&&this._uActions[c]&&!this._uActions[c](d))return delete this._in_progress[e];this._in_progress[e]!=
"wait"&&this.setUpdated(a,!1);var g=a;switch(c){case "inserted":case "insert":b!=a&&(this.obj[this._methods[2]](a,b),a=b);break;case "delete":case "deleted":return this.obj.setUserData(a,this.action_param,"true_deleted"),this.obj[this._methods[3]](a),delete this._in_progress[e],this.callEvent("onAfterUpdate",[a,c,b,d])}this._in_progress[e]!="wait"?(f&&this.obj.setUserData(a,this.action_param,""),delete this._in_progress[e]):(delete this._in_progress[e],this.setUpdated(b,!0,this.obj.getUserData(a,
this.action_param)));this.callEvent("onAfterUpdate",[a,c,b,d])},afterUpdate:function(a,b,c,d,e){e.getXMLTopNode("data");if(e.xmlDoc.responseXML){for(var f=e.doXPath("//data/action"),g=0;g<f.length;g++){var h=f[g],i=h.getAttribute("type"),j=h.getAttribute("sid"),k=h.getAttribute("tid");a.afterUpdateCallback(j,k,i,h)}a.finalizeUpdate()}},finalizeUpdate:function(){this._waitMode&&this._waitMode--;(this.obj.mytype=="tree"||this.obj._h2)&&this.updatedRows.length&&this.sendData();this.callEvent("onAfterUpdateFinish",
[]);this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(a){this.obj=a;this.obj._dp_init&&this.obj._dp_init(this)},setOnAfterUpdate:function(a){this.attachEvent("onAfterUpdate",a)},enableDebug:function(){},setOnBeforeUpdateHandler:function(a){this.attachEvent("onBeforeDataSending",a)},setAutoUpdate:function(a,b){a=a||2E3;this._user=b||(new Date).valueOf();this._need_update=!1;this._loader=null;this._update_busy=!1;this.attachEvent("onAfterUpdate",function(a,b,c,g){this.afterAutoUpdate(a,
b,c,g)});this.attachEvent("onFullSync",function(){this.fullSync()});var c=this;window.setInterval(function(){c.loadUpdate()},a)},afterAutoUpdate:function(a,b){return b=="collision"?(this._need_update=!0,!1):!0},fullSync:function(){if(this._need_update==!0)this._need_update=!1,this.loadUpdate();return!0},getUpdates:function(a,b){if(this._update_busy)return!1;else this._update_busy=!0;this._loader=this._loader||new dtmlXMLLoaderObject(!0);this._loader.async=!0;this._loader.waitCall=b;this._loader.loadXML(a)},
_v:function(a){return a.firstChild?a.firstChild.nodeValue:""},_a:function(a){for(var b=[],c=0;c<a.length;c++)b[c]=this._v(a[c]);return b},loadUpdate:function(){var a=this,b=this.obj.getUserData(0,"version"),c=this.serverProcessor+getUrlSymbol(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+b].join("&"),c=c.replace("editing=true&","");this.getUpdates(c,function(){var b=a._loader.doXPath("//userdata");a.obj.setUserData(0,"version",a._v(b[0]));var c=a._loader.doXPath("//update");if(c.length){a._silent_mode=
!0;for(var f=0;f<c.length;f++){var g=c[f].getAttribute("status"),h=c[f].getAttribute("id"),i=c[f].getAttribute("parent");switch(g){case "inserted":a.callEvent("insertCallback",[c[f],h,i]);break;case "updated":a.callEvent("updateCallback",[c[f],h,i]);break;case "deleted":a.callEvent("deleteCallback",[c[f],h,i])}}a._silent_mode=!1}a._update_busy=!1;a=null})}};window.dhx||(dhx={});dhx.version="3.0";dhx.codebase="./";dhx.name="Core";dhx.copy=function(a){var b=dhx.copy.W;b.prototype=a;return new b};
dhx.copy.W=function(){};dhx.extend=function(a,b,c){a.r&&(a=a.r[0]);for(var d in b)if(!a[d]||c)a[d]=b[d];b.defaults&&dhx.extend(a.defaults,b.defaults);b.c&&b.c.call(a);return a};dhx.fullCopy=function(a){var b=a.length?[]:{};arguments.length>1&&(b=arguments[0],a=arguments[1]);for(var c in a)typeof a[c]=="object"?(b[c]=a[c].length?[]:{},dhx.fullCopy(b[c],a[c])):b[c]=a[c];return b};dhx.single=function(a){var b=null,c=function(){b||(b=new a({}));b.ba&&b.ba.apply(b,arguments);return b};return c};
dhx.protoUI=function(){var a=arguments,b=a[0].name,c=function(d){if(a){for(var e=[a[0]],f=1;f<a.length;f++)e[f]=a[f],e[f].r&&(e[f]=e[f].call(dhx)),e[f].prototype&&e[f].prototype.name&&(dhx.ui[e[f].prototype.name]=e[f]);dhx.ui[b]=dhx.proto.apply(dhx,e);if(c.m)for(f=0;f<c.m.length;f++)dhx.Type(dhx.ui[b],c.m[f]);c=a=null}return this!=dhx?new dhx.ui[b](d):dhx.ui[b]};c.r=arguments;return dhx.ui[b]=c};
dhx.proto=function(){for(var a=arguments,b=a[0],c=!!b.c,d=[],e=a.length-1;e>0;e--){if(typeof a[e]=="function")a[e]=a[e].prototype;a[e].c&&d.push(a[e].c);if(a[e].defaults){var f=a[e].defaults;if(!b.defaults)b.defaults={};for(var g in f)dhx.isNotDefined(b.defaults[g])&&(b.defaults[g]=f[g])}if(a[e].type&&b.type)for(g in a[e].type)b.type[g]||(b.type[g]=a[e].type[g]);for(var h in a[e])b[h]||(b[h]=a[e][h])}c&&d.push(b.c);b.c=function(){for(var a=0;a<d.length;a++)d[a].apply(this,arguments)};var i=function(a){this.w=
[];this.c(a);this.O&&this.O(a,this.defaults);for(a=0;a<this.w.length;a++)this.w[a].call(this)};i.prototype=b;b=a=null;return i};dhx.bind=function(a,b){return function(){return a.apply(b,arguments)}};dhx.require=function(a){dhx.L[a]||(dhx.exec(dhx.ajax().sync().get(dhx.codebase+a).responseText),dhx.L[a]=!0)};dhx.L={};dhx.exec=function(a){window.execScript?window.execScript(a):window.eval(a)};dhx.wrap=function(a,b){return!a?b:function(){var c=a.apply(this,arguments);b.apply(this,arguments);return c}};
dhx.methodPush=function(a,b){return function(){var c=!1;return c=a[b].apply(a,arguments)}};dhx.isNotDefined=function(a){return typeof a=="undefined"};dhx.delay=function(a,b,c,d){return window.setTimeout(function(){var d=a.apply(b,c||[]);a=b=c=null;return d},d||1)};dhx.uid=function(){if(!this.G)this.G=(new Date).valueOf();this.G++;return this.G};dhx.toNode=function(a){return typeof a=="string"?document.getElementById(a):a};dhx.toArray=function(a){return dhx.extend(a||[],dhx.PowerArray,!0)};
dhx.toFunctor=function(a){return typeof a=="string"?eval(a):a};dhx.g={};dhx.event=function(a,b,c,d){var a=dhx.toNode(a),e=dhx.uid();d&&(c=dhx.bind(c,d));dhx.g[e]=[a,b,c];a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c);return e};dhx.eventRemove=function(a){if(a){var b=dhx.g[a];b[0].removeEventListener?b[0].removeEventListener(b[1],b[2],!1):b[0].detachEvent&&b[0].detachEvent("on"+b[1],b[2]);delete this.g[a]}};
dhx.EventSystem={c:function(){this.g={};this.n={};this.C={}},blockEvent:function(){this.g.I=!0},unblockEvent:function(){this.g.I=!1},mapEvent:function(a){dhx.extend(this.C,a,!0)},callEvent:function(a,b){if(this.g.I)return!0;var a=a.toLowerCase(),c=this.g[a.toLowerCase()],d=!0;if(c)for(var e=0;e<c.length;e++)if(c[e].apply(this,b||[])===!1)d=!1;this.C[a]&&!this.C[a].callEvent(a,b)&&(d=!1);return d},attachEvent:function(a,b,c){var a=a.toLowerCase(),c=c||dhx.uid(),b=dhx.toFunctor(b),d=this.g[a]||dhx.toArray();
d.push(b);this.g[a]=d;this.n[c]={f:b,t:a};return c},detachEvent:function(a){if(this.n[a]){var b=this.n[a].t,c=this.n[a].f,b=this.g[b];b.remove(c);delete this.n[a]}},hasEvent:function(a){a=a.toLowerCase();return this.g[a]?!0:!1}};dhx.extend(dhx,dhx.EventSystem);
dhx.PowerArray={removeAt:function(a,b){a>=0&&this.splice(a,b||1)},remove:function(a){this.removeAt(this.find(a))},insertAt:function(a,b){if(!b&&b!==0)this.push(a);else{var c=this.splice(b,this.length-b);this[b]=a;this.push.apply(this,c)}},find:function(a){for(var b=0;b<this.length;b++)if(a==this[b])return b;return-1},each:function(a,b){for(var c=0;c<this.length;c++)a.call(b||this,this[c])},map:function(a,b){for(var c=0;c<this.length;c++)this[c]=a.call(b||this,this[c]);return this}};dhx.env={};
(function(){if(navigator.userAgent.indexOf("Mobile")!=-1)dhx.env.mobile=!0;if(dhx.env.mobile||navigator.userAgent.indexOf("iPad")!=-1||navigator.userAgent.indexOf("Android")!=-1)dhx.env.touch=!0;navigator.userAgent.indexOf("Opera")!=-1?dhx.env.isOpera=!0:(dhx.env.isIE=!!document.all,dhx.env.isFF=!document.all,dhx.env.isWebKit=navigator.userAgent.indexOf("KHTML")!=-1,dhx.env.isSafari=dhx.env.isWebKit&&navigator.userAgent.indexOf("Mac")!=-1);if(navigator.userAgent.toLowerCase().indexOf("android")!=
-1)dhx.env.isAndroid=!0;dhx.env.transform=!1;dhx.env.transition=!1;for(var a={names:["transform","transition"],transform:["transform","WebkitTransform","MozTransform","oTransform","msTransform"],transition:["transition","WebkitTransition","MozTransition","oTransition","msTransition"]},b=document.createElement("DIV"),c=0;c<a.names.length;c++)for(var d=a[a.names[c]],e=0;e<d.length;e++)if(typeof b.style[d[e]]!="undefined"){dhx.env[a.names[c]]=d[e];break}b.style[dhx.env.transform]="translate3d(0,0,0)";
dhx.env.translate=b.style[dhx.env.transform]?"translate3d":"translate";dhx.env.transformCSSPrefix=function(){var a;dhx.env.isOpera?a="-o-":(a="",dhx.env.isFF&&(a="-Moz-"),dhx.env.isWebKit&&(a="-webkit-"),dhx.env.isIE&&(a="-ms-"));return a}();dhx.env.transformPrefix=dhx.env.transformCSSPrefix.replace(/-/gi,"");dhx.env.transitionEnd=dhx.env.transformCSSPrefix=="-Moz-"?"transitionend":dhx.env.transformPrefix+"TransitionEnd"})();
dhx.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();
dhx.html={create:function(a,b,c){var b=b||{},d=document.createElement(a),e;for(e in b)d.setAttribute(e,b[e]);if(b.style)d.style.cssText=b.style;if(b["class"])d.className=b["class"];if(c)d.innerHTML=c;return d},getValue:function(a){a=dhx.toNode(a);return!a?"":dhx.isNotDefined(a.value)?a.innerHTML:a.value},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else a&&a.parentNode&&a.parentNode.removeChild(a)},insertBefore:function(a,b,c){a&&(b&&b.parentNode?b.parentNode.insertBefore(a,
b):c.appendChild(a))},locate:function(a,b){if(a.tagName)var c=a;else a=a||event,c=a.target||a.srcElement;for(;c;){if(c.getAttribute){var d=c.getAttribute(b);if(d)return d}c=c.parentNode}return null},offset:function(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-
h;return{y:Math.round(i),x:Math.round(j)}}else{for(j=i=0;a;)i+=parseInt(a.offsetTop,10),j+=parseInt(a.offsetLeft,10),a=a.offsetParent;return{y:i,x:j}}},pos:function(a){a=a||event;if(a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};var b=dhx.env.isIE&&document.compatMode!="BackCompat"?document.documentElement:document.body;return{x:a.clientX+b.scrollLeft-b.clientLeft,y:a.clientY+b.scrollTop-b.clientTop}},preventEvent:function(a){a&&a.preventDefault&&a.preventDefault();return dhx.html.stopEvent(a)},stopEvent:function(a){(a||
event).cancelBubble=!0;return!1},addCss:function(a,b){a.className+=" "+b},removeCss:function(a,b){a.className=a.className.replace(RegExp(" "+b,"g"),"")}};dhx.ready=function(a){this.aa?a.call():this.v.push(a)};dhx.v=[];
(function(){var a=document.getElementsByTagName("SCRIPT");if(a.length)a=(a[a.length-1].getAttribute("src")||"").split("/"),a.splice(a.length-1,1),dhx.codebase=a.slice(0,a.length).join("/")+"/";dhx.event(window,"load",function(){dhx.callEvent("onReady",[]);dhx.delay(function(){dhx.aa=!0;for(var a=0;a<dhx.v.length;a++)dhx.v[a].call();dhx.v=[]})})})();dhx.ui={};dhx.ui.zIndex=function(){return dhx.ui.ea++};dhx.ui.ea=1;
dhx.ready(function(){dhx.event(document.body,"click",function(a){dhx.callEvent("onClick",[a||event])})});dhx.ajax=function(a,b,c){if(arguments.length!==0){var d=new dhx.ajax;if(c)d.master=c;d.get(a,null,b)}return!this.getXHR?new dhx.ajax:this};
dhx.ajax.prototype={getXHR:function(){return dhx.env.isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(a,b,c){var d=this.getXHR();typeof c=="function"&&(c=[c]);if(typeof b=="object"){var e=[],f;for(f in b){var g=b[f];if(g===null||g===dhx.undefined)g="";e.push(f+"="+encodeURIComponent(g))}b=e.join("&")}b&&!this.post&&(a=a+(a.indexOf("?")!=-1?"&":"?")+b,b=null);d.open(this.post?"POST":"GET",a,!this.da);this.post&&d.setRequestHeader("Content-type","application/x-www-form-urlencoded");
var h=this;d.onreadystatechange=function(){if(!d.readyState||d.readyState==4){if(c&&h)for(var a=0;a<c.length;a++)c[a]&&c[a].call(h.master||h,d.responseText,d.responseXML,d);c=h=h.master=null}};d.send(b||null);return d},get:function(a,b,c){this.post=!1;return this.send(a,b,c)},post:function(a,b,c){this.post=!0;return this.send(a,b,c)},sync:function(){this.da=!0;return this}};
dhx.AtomDataLoader={c:function(a){this.data={};if(a)this.a.datatype=a.datatype||"json",this.w.push(this.X)},X:function(){this.P=!0;this.a.url&&this.url_setter(this.a.url);this.a.data&&this.data_setter(this.a.data)},url_setter:function(a){if(!this.P)return a;this.load(a,this.a.datatype);return a},data_setter:function(a){if(!this.P)return a;this.parse(a,this.a.datatype);return!0},load:function(a,b,c){this.callEvent("onXLS",[]);typeof b=="string"?(this.data.driver=dhx.DataDriver[b],b=c):this.data.driver=
dhx.DataDriver.json;dhx.ajax(a,[this.D,b],this)},parse:function(a,b){this.callEvent("onXLS",[]);this.data.driver=dhx.DataDriver[b||"json"];this.D(a,null)},D:function(a,b){var c=this.data.driver,d=c.getRecords(c.toObject(a,b))[0];this.data=c?c.getDetails(d):a;this.callEvent("onXLE",[])},q:function(a){if(!this.a.dataFeed||this.B||!a)return!0;var b=this.a.dataFeed,b=b+(b.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(a.id||a);this.callEvent("onXLS",[]);dhx.ajax(b,function(a){this.B=!0;
this.setValues(dhx.DataDriver.json.toObject(a)[0]);this.B=!1;this.callEvent("onXLE",[])},this);return!1}};dhx.DataDriver={};dhx.DataDriver.json={toObject:function(a){a||(a="[]");if(typeof a=="string")eval("dhx.temp="+a),a=dhx.temp;if(a.data){var b=a.data;b.pos=a.pos;b.total_count=a.total_count;a=b}return a},getRecords:function(a){return a&&!(a instanceof Array)?[a]:a},getDetails:function(a){return a},getInfo:function(a){return{k:a.total_count||0,i:a.pos||0}}};
dhx.DataDriver.json_ext={toObject:function(a){a||(a="[]");if(typeof a=="string"){var b;eval("temp="+a);dhx.temp=[];for(var c=b.header,a=0;a<b.data.length;a++){for(var d={},e=0;e<c.length;e++)typeof b.data[a][e]!="undefined"&&(d[c[e]]=b.data[a][e]);dhx.temp.push(d)}return dhx.temp}return a},getRecords:function(a){return a&&!(a instanceof Array)?[a]:a},getDetails:function(a){return a},getInfo:function(a){return{k:a.total_count||0,i:a.pos||0}}};
dhx.DataDriver.html={toObject:function(a){if(typeof a=="string"){var b=null;a.indexOf("<")==-1&&(b=dhx.toNode(a));if(!b)b=document.createElement("DIV"),b.innerHTML=a;return b.getElementsByTagName(this.tag)}return a},getRecords:function(a){return a.tagName?a.childNodes:a},getDetails:function(a){return dhx.DataDriver.xml.tagToObject(a)},getInfo:function(){return{k:0,i:0}},tag:"LI"};
dhx.DataDriver.jsarray={toObject:function(a){return typeof a=="string"?(eval("dhx.temp="+a),dhx.temp):a},getRecords:function(a){return a},getDetails:function(a){for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return b},getInfo:function(){return{k:0,i:0}}};
dhx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(a){for(var a=this.stringToArray(a),b={},c=0;c<a.length;c++)b["data"+c]=a[c];return b},getInfo:function(){return{k:0,i:0}},stringToArray:function(a){for(var a=a.split(this.cell),b=0;b<a.length;b++)a[b]=a[b].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return a},row:"\n",cell:","};
dhx.DataDriver.xml={toObject:function(a,b){return b&&(b=this.checkResponse(a,b))?b:typeof a=="string"?this.fromString(a):a},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){return{k:a.documentElement.getAttribute("total_count")||0,i:a.documentElement.getAttribute("pos")||0}},xpath:function(a,b){if(window.XPathResult){var c=a;if(a.nodeName.indexOf("document")==-1)a=a.ownerDocument;for(var d=[],e=a.evaluate(b,
c,null,XPathResult.ANY_TYPE,null),a=e.iterateNext();a;)d.push(a),a=e.iterateNext();return d}else{d=!0;try{typeof a.selectNodes=="undefined"&&(d=!1)}catch(f){}return d?a.selectNodes(b):(d=b.split("/").pop(),a.getElementsByTagName(d))}},tagToObject:function(a,b){var b=b||{},c=!1,d=a.attributes;if(d&&d.length){for(var e=0;e<d.length;e++)b[d[e].name]=d[e].value;c=!0}d=a.childNodes;for(e=0;e<d.length;e++)if(d[e].nodeType==1){var f=d[e].tagName;typeof b[f]!="undefined"?(b[f]instanceof Array||(b[f]=[b[f]]),
b[f].push(this.tagToObject(d[e],{}))):b[d[e].tagName]=this.tagToObject(d[e],{});c=!0}if(!c)return this.nodeValue(a);b.value=this.nodeValue(a);return b},nodeValue:function(a){return a.firstChild?a.firstChild.data:""},fromString:function(a){if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");if(window.ActiveXObject){var b=new ActiveXObject("Microsoft.xmlDOM");b.loadXML(a);return b}},checkResponse:function(a,b){if(b&&b.firstChild&&b.firstChild.tagName!="parsererror")return b;if(a=
this.fromString(a.replace(/^[\s]+/,"")))return a}};
dhx.DataLoader=dhx.proto({c:function(a){a=a||"";name="DataStore";this.data=a.datastore||new dhx.DataStore;this.F=this.data.attachEvent("onStoreLoad",dhx.bind(this.V,this))},load:function(a){dhx.AtomDataLoader.load.apply(this,arguments);if(!this.data.feed)this.data.url=a,this.data.feed=function(b,c){if(this.u)return this.u=[b,c];else this.u=!0;this.load(a+(a.indexOf("?")==-1?"?":"&")+"start="+b+"&count="+c,function(){var a=this.u;this.u=!1;typeof a=="object"?this.data.feed.apply(this,a):this.showItem&&
this.dataCount()>b+1&&this.showItem(this.idByIndex(b+1))})}},loadNext:function(a,b){this.data.feed&&this.data.feed.call(this,b||this.dataCount(),a)},D:function(a,b){this.data.$(this.data.driver.toObject(a,b));this.callEvent("onXLE",[]);if(this.F)this.data.detachEvent(this.F),this.F=null},scheme_setter:function(a){this.data.scheme(a)},dataFeed_setter:function(a){this.data.attachEvent("onBeforeFilter",dhx.bind(function(a,c){if(this.a.dataFeed){var d={};if(a||d){if(typeof a=="function"){if(!c)return;
a(c,d)}else d={text:c};this.clearAll();var a=this.a.dataFeed,e=[],f;for(f in d)e.push("dhx_filter["+f+"]="+encodeURIComponent(d[f]));this.load(a+(a.indexOf("?")<0?"?":"&")+e.join("&"),this.a.datatype);return!1}}},this));return a},V:function(){if(this.a.ready){var a=dhx.toFunctor(this.a.ready);a&&a.call&&a.apply(this,arguments)}}},dhx.AtomDataLoader).prototype;dhx.DataStore=function(){this.name="DataStore";dhx.extend(this,dhx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhx.toArray()};
dhx.DataStore.prototype={setDriver:function(a){this.driver=dhx.DataDriver[a]},$:function(a){this.callEvent("onParse",[this.driver,a]);this.d&&this.filter();var b=this.driver.getInfo(a),c=this.driver.getRecords(a),d=(b.i||0)*1;if(d===0&&this.order[0])d=this.order.length;for(var e=0,f=0;f<c.length;f++){var g=this.driver.getDetails(c[f]),h=this.id(g);this.pull[h]||(this.order[e+d]=h,e++);this.pull[h]=g;this.extraParser&&this.extraParser(g);this.e&&(this.e.$init?this.e.$init(g):this.e.$update&&this.e.$update(g))}if(!this.order[b.k-
1])this.order[b.k-1]=dhx.undefined;this.callEvent("onStoreLoad",[this.driver,a]);this.refresh()},id:function(a){return a.id||(a.id=dhx.uid())},changeId:function(a,b){this.pull[b]=this.pull[a];this.pull[b].id=b;this.order[this.order.find(a)]=b;this.d&&(this.d[this.d.find(a)]=b);this.callEvent("onIdChange",[a,b]);this.ca&&this.ca(a,b);delete this.pull[a]},item:function(a){return this.pull[a]},update:function(a,b){this.e&&this.e.$update&&this.e.$update(b);if(this.callEvent("onBeforeUpdate",[a,b])===
!1)return!1;this.pull[a]=b;this.refresh(a)},refresh:function(a){this.R||(a?this.callEvent("onStoreUpdated",[a,this.pull[a],"update"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(a,b){this.R=!0;a.call(b||this);this.R=!1},getRange:function(a,b){a=a?this.indexById(a):this.startOffset||0;b?b=this.indexById(b):(b=Math.min(this.endOffset||Infinity,this.dataCount()-1),b<0&&(b=0));if(a>b)var c=b,b=a,a=c;return this.getIndexRange(a,b)},getIndexRange:function(a,b){for(var b=Math.min(b||
Infinity,this.dataCount()-1),c=dhx.toArray(),a=a||0;a<=b;a++)c.push(this.item(this.order[a]));return c},dataCount:function(){return this.order.length},exists:function(a){return!!this.pull[a]},move:function(a,b){if(!(a<0||b<0)){var c=this.idByIndex(a),d=this.item(c);this.order.removeAt(a);this.order.insertAt(c,Math.min(this.order.length,b));this.callEvent("onStoreUpdated",[c,d,"move"])}},scheme:function(a){this.e=a},sync:function(a,b,c){typeof b!="function"&&(c=b,b=null);if(dhx.debug_bind)this.debug_sync_master=
a;if(a.name!="DataStore")a=a.data;var d=dhx.bind(function(){this.order=dhx.toArray([].concat(a.order));this.d=null;this.pull=a.pull;b&&this.silent(b);this.M&&this.M();c?c=!1:this.refresh()},this);a.attachEvent("onStoreUpdated",d);d()},add:function(a,b){if(this.e){var a=a||{},c;for(c in this.e)a[c]=a[c]||this.e[c];this.e.$init?this.e.$init(a):this.e.$update&&this.e.$update(a)}c=this.id(a);var d=this.dataCount();if(dhx.isNotDefined(b)||b<0)b=d;b>d&&(b=Math.min(this.order.length,b));if(this.callEvent("onBeforeAdd",
[c,a,b])===!1)return!1;if(this.exists(c))return null;this.pull[c]=a;this.order.insertAt(c,b);if(this.d){var e=this.d.length;!b&&this.order.length&&(e=0);this.d.insertAt(c,e)}this.callEvent("onafterAdd",[c,b]);this.callEvent("onStoreUpdated",[c,a,"add"]);return c},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else{if(this.callEvent("onBeforeDelete",[a])===!1)return!1;if(!this.exists(a))return null;b=this.item(a);this.order.remove(a);this.d&&this.d.remove(a);
delete this.pull[a];this.callEvent("onafterdelete",[a]);this.callEvent("onStoreUpdated",[a,b,"delete"])}},clearAll:function(){this.pull={};this.order=dhx.toArray();this.d=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(a){return this.order[a]},indexById:function(a){return a=this.order.find(a)},next:function(a,b){return this.order[this.indexById(a)+(b||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(a,b){return this.order[this.indexById(a)-
(b||1)]},sort:function(a,b,c){var d=a;typeof a=="function"?d={as:a,dir:b}:typeof a=="string"&&(d={by:a,dir:b,as:c});var e=[d.by,d.dir,d.as];if(this.callEvent("onbeforesort",e)){if(this.order.length){var f=dhx.sort.create(d),g=this.getRange(this.first(),this.last());g.sort(f);this.order=g.map(function(a){return this.id(a)},this)}this.refresh();this.callEvent("onaftersort",e)}},filter:function(a,b,c){if(this.callEvent("onBeforeFilter",[a,b])){if(this.d&&!c)this.order=this.d,delete this.d;if(this.order.length){if(a){var d=
a,b=b||"";typeof a=="string"&&(a=dhx.Template(a),b=b.toString().toLowerCase(),d=function(b,c){return a(b).toLowerCase().indexOf(c)!=-1});for(var e=dhx.toArray(),f=0;f<this.order.length;f++){var g=this.order[f];d(this.item(g),b)&&e.push(g)}if(!c)this.d=this.order;this.order=e}this.refresh();this.callEvent("onAfterFilter",[])}}},each:function(a,b){for(var c=0;c<this.order.length;c++)a.call(b||this,this.item(this.order[c]))},provideApi:function(a,b){this.debug_bind_master=a;b&&this.mapEvent({onbeforesort:a,
onaftersort:a,onbeforeadd:a,onafteradd:a,onbeforedelete:a,onafterdelete:a,onbeforeupdate:a});for(var c="sort,add,remove,exists,idByIndex,indexById,item,update,refresh,dataCount,filter,next,previous,clearAll,first,last,serialize,sync".split(","),d=0;d<c.length;d++)a[c[d]]=dhx.methodPush(this,c[d])},serialize:function(){for(var a=this.order,b=[],c=0;c<a.length;c++)b.push(this.pull[a[c]]);return b}};
dhx.sort={create:function(a){return dhx.sort.dir(a.dir,dhx.sort.by(a.by,a.as))},as:{"int":function(a,b){a*=1;b*=1;return a>b?1:a<b?-1:0},string_strict:function(a,b){a=a.toString();b=b.toString();return a>b?1:a<b?-1:0},string:function(a,b){a=a.toString().toLowerCase();b=b.toString().toLowerCase();return a>b?1:a<b?-1:0}},by:function(a,b){if(!a)return b;typeof b!="function"&&(b=dhx.sort.as[b||"string"]);a=dhx.Template(a);return function(c,d){return b(a(c),a(d))}},dir:function(a,b){return a=="asc"?b:
function(a,d){return b(a,d)*-1}}};
(function(){var a={};dhx.Template=function(b){if(typeof b=="function")return b;if(a[b])return a[b];b=(b||"").toString();if(b.indexOf("->")!=-1)switch(b=b.split("->"),b[0]){case "html":b=dhx.html.getValue(b[1]);break;case "http":b=(new dhx.ajax).sync().get(b[1],{uid:dhx.uid()}).responseText}b=(b||"").toString();b=b.replace(/(\r\n|\n)/g,"\\n");b=b.replace(/(\")/g,'\\"');b=b.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');b=b.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\"");
b=b.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj,common):"")+"');b=b.replace(/\{obj\.([^}]*)\}/g,"\"+(obj.$1||'')+\"");b=b.replace(/#([$a-z0-9_\[\]]+)#/gi,"\"+(obj.$1||'')+\"");b=b.replace(/\{obj\}/g,'"+obj+"');b=b.replace(/\{-obj/g,"{obj");b=b.replace(/\{-common/g,"{common");b='return "'+b+'";';try{Function("obj","common",b)}catch(c){}return a[b]=Function("obj","common",b)};dhx.Template.empty=function(){return""};dhx.Template.bind=function(a){return dhx.bind(dhx.Template(a),
this)};dhx.Type=function(a,c){if(a.r){if(!a.m)a.m=[];a.m.push(c)}else{if(typeof a=="function")a=a.prototype;if(!a.types)a.types={"default":a.type},a.type.name="default";var d=c.name,e=a.type;d&&(e=a.types[d]=dhx.copy(a.type));for(var f in c)e[f]=f.indexOf("template")===0?dhx.Template(c[f]):c[f];return d}}})();
dhx.Settings={c:function(){this.a=this.config={}},define:function(a,b){return typeof a=="object"?this.N(a):this.J(a,b)},J:function(a,b){var c=this[a+"_setter"];return this.a[a]=c?c.call(this,b,a):b},N:function(a){if(a)for(var b in a)this.J(b,a[b])},O:function(a,b){var c={};b&&(c=dhx.extend(c,b));typeof a=="object"&&!a.tagName&&dhx.extend(c,a,!0);this.N(c)},Y:function(a,b){for(var c in b)switch(typeof a[c]){case "object":a[c]=this.Y(a[c]||{},b[c]);break;case "undefined":a[c]=b[c]}return a}};
dhx.BaseBind={bind:function(a,b,c){typeof a=="string"&&(a=dhx.ui.get(a));a.b&&a.b();this.b&&this.b();a.getBindData||dhx.extend(a,dhx.BindSource);if(!this.T){var d=this.render;if(this.filter){var e=this.a.id;this.data.M=function(){a.p[e]=!1}}this.render=function(){if(!this.K)return this.K=!0,this.callEvent("onBindRequest"),this.K=!1,d.call(this)};if(this.getValue||this.getValues)this.save=function(){this.validate&&!this.validate()||a.setBindData(this.getValue?this.getValue:this.getValues(),this.a.id)};
this.T=!0}a.addBind(this.a.id,b,c);this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){a.getBindData(this.a.id)});this.isVisible(this.a.id)&&this.refresh()}};
dhx.BindSource={c:function(){this.o={};this.p={};this.A={};this.U(this)},setBindData:function(a,b){b&&(this.A[b]=!0);if(this.setValue)this.setValue(a);else if(this.setValues)this.setValues(a);else{var c=this.getCursor();c&&(a=dhx.extend(this.item(c),a,!0),this.update(c,a))}this.callEvent("onBindUpdate",[a,b]);this.save&&this.save();b&&(this.A[b]=!1)},getBindData:function(a,b){if(!this.p[a]){var c=dhx.ui.get(a);c.isVisible(c.a.id)&&(this.p[a]=!0,this.z(c,this.o[a][0],this.o[a][1]),b&&c.filter&&c.refresh())}},
addBind:function(a,b,c){this.o[a]=[b,c]},U:function(a){a.filter?dhx.extend(this,dhx.CollectionBind):a.setValue?dhx.extend(this,dhx.ValueBind):dhx.extend(this,dhx.RecordBind)},l:function(){for(var a in this.o)this.A[a]||(this.p[a]=!1,this.getBindData(a,!0))},H:function(a,b,c){a.setValue?a.setValue(c?c[b]:c):a.filter?a.data.silent(function(){this.filter(b,c)}):!c&&a.clear?a.clear():a.q(c)&&a.setValues(dhx.copy(c))}};
dhx.DataValue=dhx.proto({name:"DataValue",isVisible:function(){return!0},c:function(a){a=(this.data=a)&&a.id?a.id:dhx.uid();this.a={id:a};dhx.ui.views[a]=this},setValue:function(a){this.data=a;this.callEvent("onChange",[a])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind);
dhx.DataRecord=dhx.proto({name:"DataRecord",isVisible:function(){return!0},c:function(a){this.data=a||{};a=a&&a.id?a.id:dhx.uid();this.a={id:a};dhx.ui.views[a]=this},getValues:function(){return this.data},setValues:function(a){this.data=a;this.callEvent("onChange",[a])},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind);
dhx.DataCollection=dhx.proto({name:"DataCollection",isVisible:function(){return!this.data.order.length&&!this.data.d&&!this.a.dataFeed?!1:!0},c:function(a){this.data.provideApi(this,!0);a=a&&a.id?a.id:dhx.uid();this.a.id=a;dhx.ui.views[a]=this;this.data.attachEvent("onStoreLoad",dhx.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},dhx.EventSystem,dhx.DataLoader,dhx.BaseBind,dhx.Settings);
dhx.ValueBind={c:function(){this.attachEvent("onChange",this.l)},z:function(a,b,c){var d=this.getValue()||"";c&&(d=c(d));if(a.setValue)a.setValue(d);else if(a.filter)a.data.silent(function(){this.filter(b,d)});else{var e={};e[b]=d;a.q(d)&&a.setValues(e)}}};dhx.RecordBind={c:function(){this.attachEvent("onChange",this.l)},z:function(a,b){var c=this.getValues()||null;this.H(a,b,c)}};
dhx.CollectionBind={c:function(){this.h=null;this.attachEvent("onSelectChange",function(){this.setCursor(this.getSelected())});this.attachEvent("onAfterCursorChange",this.l);this.data.attachEvent("onStoreUpdated",dhx.bind(function(a){a&&a==this.getCursor()&&this.l()},this));this.data.attachEvent("onClearAll",dhx.bind(function(){this.h=null},this));this.data.attachEvent("onIdChange",dhx.bind(function(a,b){if(this.h==a)this.h=b},this))},setCursor:function(a){if(a!=this.h&&this.item(a))this.callEvent("onBeforeCursorChange",
[this.h]),this.h=a,this.callEvent("onAfterCursorChange",[a])},getCursor:function(){return this.h},z:function(a,b){var c=this.item(this.getCursor())||null;this.H(a,b,c)}};if(!dhx.ui.views)dhx.ui.views={},dhx.ui.get=function(a){return a.a?a:dhx.ui.views[a]};
dhtmlXDataStore=function(a){var a=new dhx.DataCollection(a),b="_dp_init";a[b]=function(a){var b="_methods";a[b]=["dummy","dummy","changeId","dummy"];this.data.Z={add:"inserted",update:"updated","delete":"deleted"};this.data.attachEvent("onStoreUpdated",function(b,d,g){b&&!a.Q&&a.setUpdated(b,!0,this.Z[g])});b="_getRowData";a[b]=function(a){var b=this.obj.data.item(a),a={id:a,"!nativeeditor_status":this.obj.getUserData(a)};if(b)for(var c in b)c.indexOf("_")!==0&&(a[c]=b[c]);return a};this.changeId=
function(b,d){this.data.changeId(b,d);a.Q=!0;this.data.callEvent("onStoreUpdated",[d,this.item(d),"update"]);a.Q=!1};b="_clearUpdateFlag";a[b]=function(){};this.S={}};a.dummy=function(){};a.setUserData=function(a,b,e){this.S[a]=e};a.getUserData=function(a){return this.S[a]};return a};
if(window.dhtmlXDataView)dhtmlXDataView.prototype.b=function(){this.isVisible=function(){return!this.data.order.length&&!this.data.d&&!this.a.dataFeed?!1:!0};if(!this.a.id)this.a.id=dhx.uid();dhx.ui.views[this.a.id]=this};if(window.dhtmlXChart)dhtmlXChart.prototype.b=function(){this.isVisible=function(){return!this.data.order.length&&!this.data.ga&&!this.a.dataFeed?!1:!0};if(!this.a.id)this.a.id=dhx.uid();dhx.ui.views[this.a.id]=this};
dhx.BaseBind.legacyBind=function(){return dhx.BaseBind.bind.apply(this,arguments)};dhx.BaseBind.legacySync=function(a){this.b&&this.b();a.b&&a.b();this.attachEvent("onAfterEditStop",function(a){this.save(a);return!0});this.save=function(b){b||(b=this.getCursor());var c=this.item(b),d=a.item(b),e;for(e in c)e.indexOf("$")!==0&&(d[e]=c[e]);a.refresh(b)};return this.data.sync.apply(this.data,arguments)};
if(window.dhtmlXForm)dhtmlXForm.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXForm.prototype.b=function(){if(dhx.isNotDefined(this.a))this.a={id:dhx.uid(),dataFeed:this.j},dhx.ui.views[this.a.id]=this},dhtmlXForm.prototype.q=function(a){if(!this.a.dataFeed||this.B||!a)return!0;var b=this.a.dataFeed,b=b+(b.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(a.id||a);this.load(b);return!1},dhtmlXForm.prototype.setValues=dhtmlXForm.prototype.setFormData,dhtmlXForm.prototype.getValues=
function(){return this.getFormData(!1,!0)},dhtmlXForm.prototype.dataFeed=function(a){this.a?this.a.dataFeed=a:this.j=a},dhtmlXForm.prototype.refresh=dhtmlXForm.prototype.isVisible=function(){return!0};
if(window.dhtmlXCombo)dhtmlXCombo.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXCombo.prototype.dataFeed=function(a){this.a?this.a.dataFeed=a:this.j=a},dhtmlXCombo.prototype.sync=function(a){this.b&&this.b();a.b&&a.b();var b=this,c=function(){b.clearAll();b.addOption(this.serialize())};a.data.attachEvent("onStoreUpdated",function(){c.call(this)});a.data.attachEvent("onIdChange",function(a,c){b.changeOptionId(a,c)});c.call(a)},dhtmlXCombo.prototype.b=function(){if(dhx.isNotDefined(this.a))this.a=
{id:dhx.uid(),dataFeed:this.j},dhx.ui.views[this.a.id]=this,this.data={silent:dhx.bind(function(a){a.call(this)},this)},dhtmlxEventable(this.data),this.attachEvent("onChange",function(){this.callEvent("onSelectChange",[this.getSelectedValue()])}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])})},dhtmlXCombo.prototype.item=function(){return this.ha},dhtmlXCombo.prototype.getSelected=function(){return this.getSelectedValue()},dhtmlXCombo.prototype.isVisible=function(){return!this.optionsArr.length&&
!this.a.dataFeed?!1:!0},dhtmlXCombo.prototype.refresh=function(){this.render(!0)},dhtmlXCombo.prototype.filter=function(){alert("not implemented")};
if(window.dhtmlXGridObject)dhtmlXGridObject.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXGridObject.prototype.dataFeed=function(a){this.a?this.a.dataFeed=a:this.j=a},dhtmlXGridObject.prototype.sync=function(a,b){this.b&&this.b();a.b&&a.b();var c=this,d="_parsing",e="_parser",f="_locator",g="_process_store_row",h="_get_store_data";this.save=function(b){b||(b=this.getCursor());dhx.extend(a.item(b),this.item(b),!0);a.refresh(b)};var i=function(a){var b=0;c.s?(b=c.s,c.s=!1):
c.clearAll();if(a!==-1&&(a=this.dataCount())){c[d]=!0;for(var i=b;i<a;i++){var m=this.order[i];if(m&&(!b||!c.rowsBuffer[i]))c.rowsBuffer[i]={idd:m,data:this.pull[m]},c.rowsBuffer[i][e]=c[g],c.rowsBuffer[i][f]=c[h],c.rowsAr[m]=this.pull[m]}if(!c.rowsBuffer[a-1])c.rowsBuffer[a-1]=dhtmlx.undefined,c.xmlFileUrl=c.xmlFileUrl||!0;c.pagingOn?c.changePage():c.ia&&c.fa?c.ja():(c.render_dataset(),c.callEvent("onXLE",[]));c[d]=!1}};a.data.attachEvent("onStoreUpdated",function(a,b,d){d=="delete"?(c.deleteRow(a),
c.data.callEvent("onStoreUpdated",[a,b,d])):d=="update"?(c.callEvent("onSyncUpdate",[b,d]),c.update(a,b),c.data.callEvent("onStoreUpdated",[a,b,d])):d=="add"?(c.callEvent("onSyncUpdate",[b,d]),c.add(a,b),c.data.callEvent("onStoreUpdated",[a,b,d])):i.call(this)});a.data.attachEvent("onStoreLoad",function(b,d){c.xmlFileUrl=a.data.url;c.s=b.getInfo(d).i});a.data.attachEvent("onIdChange",function(a,b){c.changeRowId(a,b)});i(-1);c.attachEvent("onEditCell",function(a,b){a==2&&this.save(b);return!0});c.attachEvent("onDynXLS",
function(b,d){for(var e=b;e<b+d;e++)if(!a.data.order[e])return a.loadNext(d,b),!1;c.s=b;i()});c.attachEvent("onClearAll",function(){var a="_f_rowsBuffer";this[a]=null});b&&b.sort&&c.attachEvent("onBeforeSorting",function(b,d,e){if(d=="connector")return!1;var f=this.getColumnId(b);a.sort("#"+f+"#",e=="asc"?"asc":"desc",d=="int"?d:"string");c.setSortImgState(!0,b,e);return!1});b&&b.filter&&c.attachEvent("onFilterStart",function(b,d){var e="_con_f_used";if(c[e]&&c[e].length)return!1;a.data.silent(function(){a.filter();
for(var e=0;e<b.length;e++)if(d[e]!=""){var f=c.getColumnId(b[e]);a.filter("#"+f+"#",d[e],e!=0)}});a.refresh();return!1});c.clearAndLoad=function(b){a.clearAll();a.load(b)}},dhtmlXGridObject.prototype.b=function(){if(dhx.isNotDefined(this.a)){this.a={id:dhx.uid(),dataFeed:this.j};dhx.ui.views[this.a.id]=this;this.data={silent:dhx.bind(function(a){a.call(this)},this)};dhtmlxEventable(this.data);for(var a="_cCount",b=0;b<this[a];b++)this.columnIds[b]||(this.columnIds[b]="cell"+b);this.attachEvent("onSelectStateChanged",
function(a){this.callEvent("onSelectChange",[a])});this.attachEvent("onSelectionCleared",function(){this.callEvent("onSelectChange",[null])});this.attachEvent("onEditCell",function(a,b){a===2&&this.getCursor&&b&&b==this.getCursor()&&this.l();return!0});this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])})}},dhtmlXGridObject.prototype.item=function(a){if(a===null)return null;var b="_attrs",b=dhx.fullCopy(this.getRowById(a)[b]);b.id=a;for(var c=this.getColumnsNum(),d=0;d<c;d++)b[this.columnIds[d]]=
this.cells(a,d).getValue();return b},dhtmlXGridObject.prototype.update=function(a,b){for(var c=0;c<this.columnIds.length;c++){var d=this.columnIds[c];dhx.isNotDefined(b[d])||this.cells(a,c).setValue(b[d])}c="_attrs";a=this.getRowById(a)[c];for(d in b)a[d]=b[d]},dhtmlXGridObject.prototype.add=function(a,b){for(var c=[],d=0;d<this.columnIds.length;d++){var e=this.columnIds[d];c[d]=dhx.isNotDefined(b[e])?"":b[e]}this.addRow(a,c,0);d="_attrs";this.getRowById(a)[d]=dhx.fullCopy(b)},dhtmlXGridObject.prototype.getSelected=
function(){return this.getSelectedRowId()},dhtmlXGridObject.prototype.isVisible=function(){var a="_f_rowsBuffer";return!this.rowsBuffer.length&&!this[a]&&!this.a.dataFeed?!1:!0},dhtmlXGridObject.prototype.refresh=function(){this.render_dataset()},dhtmlXGridObject.prototype.filter=function(a,b){if(this.a.dataFeed){var c={};if(!a&&!b)return;if(typeof a=="function"){if(!b)return;a(b,c)}else dhx.isNotDefined(a)?c=b:c[a]=b;this.clearAll();var d=this.a.dataFeed,e=[],f;for(f in c)e.push("dhx_filter["+f+
"]="+encodeURIComponent(c[f]));this.load(d+(d.indexOf("?")<0?"?":"&")+e.join("&"));return!1}if(b===null)return this.filterBy(0,function(){return!1});this.filterBy(0,function(c,d){return a.call(this,d,b)})};
if(window.dhtmlXTreeObject)dhtmlXTreeObject.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXTreeObject.prototype.dataFeed=function(a){this.a?this.a.dataFeed=a:this.j=a},dhtmlXTreeObject.prototype.b=function(){if(dhx.isNotDefined(this.a))this.a={id:dhx.uid(),dataFeed:this.j},dhx.ui.views[this.a.id]=this,this.data={silent:dhx.bind(function(a){a.call(this)},this)},dhtmlxEventable(this.data),this.attachEvent("onSelect",function(a){this.callEvent("onSelectChange",[a])}),this.attachEvent("onEdit",
function(a,b){a===2&&b&&b==this.getCursor()&&this.l();return!0})},dhtmlXTreeObject.prototype.item=function(a){return a===null?null:{id:a,text:this.getItemText(a)}},dhtmlXTreeObject.prototype.getSelected=function(){return this.getSelectedItemId()},dhtmlXTreeObject.prototype.isVisible=function(){return!0},dhtmlXTreeObject.prototype.refresh=function(){},dhtmlXTreeObject.prototype.filter=function(a,b){if(this.a.dataFeed){var c={};if(a||b){if(typeof a=="function"){if(!b)return;a(b,c)}else dhx.isNotDefined(a)?
c=b:c[a]=b;this.deleteChildItems(0);var a=this.a.dataFeed,b=[],d;for(d in c)b.push("dhx_filter["+d+"]="+encodeURIComponent(c[d]));this.loadXML(a+(a.indexOf("?")<0?"?":"&")+b.join("&"));return!1}}},dhtmlXTreeObject.prototype.update=function(a,b){dhx.isNotDefined(b.text)||this.setItemText(a,b.text)};dhtmlx.skin="dhx_skyblue";
